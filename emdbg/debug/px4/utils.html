<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 14.6.1"/>
    <title>emdbg.debug.px4.utils API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:.75rem center;margin-bottom:1rem;}.pdoc .alert > em{display:none;}.pdoc .alert > *:last-child{margin-bottom:0;}.pdoc .alert.note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .alert.warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .alert.danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style><style>
    .pdoc .mermaid-pre {
        border: none;
        background: none;
    }
</style>
<script type="module" defer>
    import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs";

    /* Re-invoke Mermaid when DOM content changes, for example during search. */
    document.addEventListener("DOMContentLoaded", () => {
        new MutationObserver(() => mermaid.run()).observe(
            document.querySelector("main.pdoc").parentNode,
            {childList: true}
        );
    })
</script></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../px4.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;emdbg.debug.px4</a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="function" href="#gdb_getfield">gdb_getfield</a>
            </li>
            <li>
                    <a class="function" href="#gdb_iter">gdb_iter</a>
            </li>
            <li>
                    <a class="function" href="#gdb_len">gdb_len</a>
            </li>
            <li>
                    <a class="function" href="#gdb_backtrace">gdb_backtrace</a>
            </li>
            <li>
                    <a class="function" href="#gdb_relative_location">gdb_relative_location</a>
            </li>
            <li>
                    <a class="function" href="#binary_search_last">binary_search_last</a>
            </li>
            <li>
                    <a class="function" href="#binary_search_first">binary_search_first</a>
            </li>
            <li>
                    <a class="function" href="#chunks">chunks</a>
            </li>
            <li>
                    <a class="function" href="#add_datetime">add_datetime</a>
            </li>
            <li>
                    <a class="function" href="#format_units">format_units</a>
            </li>
            <li>
                    <a class="function" href="#format_table">format_table</a>
            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../../../emdbg.html">emdbg</a><wbr>.<a href="./../../debug.html">debug</a><wbr>.<a href="./../px4.html">px4</a><wbr>.utils    </h1>

                
                        <input id="mod-utils-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-utils-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">  1</span></a><span class="c1"># Copyright (c) 2023, Auterion AG</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">  2</span></a><span class="c1"># SPDX-License-Identifier: BSD-3-Clause</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">  3</span></a>
</span><span id="L-4"><a href="#L-4"><span class="linenos">  4</span></a><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">annotations</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos">  5</span></a><span class="kn">import</span> <span class="nn">re</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">  6</span></a><span class="kn">import</span> <span class="nn">math</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">  7</span></a>
</span><span id="L-8"><a href="#L-8"><span class="linenos">  8</span></a><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">  9</span></a><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">zip_longest</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos"> 10</span></a><span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos"> 11</span></a>
</span><span id="L-12"><a href="#L-12"><span class="linenos"> 12</span></a>
</span><span id="L-13"><a href="#L-13"><span class="linenos"> 13</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos"> 14</span></a><span class="k">def</span> <span class="nf">gdb_getfield</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="s2">&quot;gdb.Value&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos"> 15</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Find the field of a struct/class by name&quot;&quot;&quot;</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos"> 16</span></a>    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">value</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">fields</span><span class="p">():</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos"> 17</span></a>        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos"> 18</span></a>            <span class="k">return</span> <span class="n">value</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos"> 19</span></a>    <span class="k">return</span> <span class="n">default</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos"> 20</span></a>
</span><span id="L-21"><a href="#L-21"><span class="linenos"> 21</span></a>
</span><span id="L-22"><a href="#L-22"><span class="linenos"> 22</span></a><span class="k">def</span> <span class="nf">gdb_iter</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos"> 23</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;yields the values in an array or value with a range&quot;&quot;&quot;</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos"> 24</span></a>    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">):</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos"> 25</span></a>        <span class="n">obj</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos"> 26</span></a>    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="s2">&quot;range&quot;</span><span class="p">):</span>
</span><span id="L-27"><a href="#L-27"><span class="linenos"> 27</span></a>        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="o">*</span><span class="n">obj</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">range</span><span class="p">()):</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos"> 28</span></a>            <span class="k">yield</span> <span class="n">obj</span><span class="p">[</span><span class="n">ii</span><span class="p">]</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos"> 29</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos"> 30</span></a>        <span class="k">return</span> <span class="p">[]</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos"> 31</span></a>
</span><span id="L-32"><a href="#L-32"><span class="linenos"> 32</span></a><span class="k">def</span> <span class="nf">gdb_len</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos"> 33</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Computes the length of a gdb object&quot;&quot;&quot;</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos"> 34</span></a>    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="s2">&quot;range&quot;</span><span class="p">):</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos"> 35</span></a>        <span class="n">start</span><span class="p">,</span> <span class="n">stop</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">range</span><span class="p">()</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos"> 36</span></a>        <span class="k">return</span> <span class="n">stop</span> <span class="o">-</span> <span class="n">start</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos"> 37</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos"> 38</span></a>        <span class="k">return</span> <span class="mi">1</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos"> 39</span></a>
</span><span id="L-40"><a href="#L-40"><span class="linenos"> 40</span></a><span class="k">def</span> <span class="nf">gdb_backtrace</span><span class="p">(</span><span class="n">gdb</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos"> 41</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos"> 42</span></a><span class="sd">    Unfortunately the built-in gdb command `backtrace` often crashes when</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos"> 43</span></a><span class="sd">    trying to resolve function arguments whose memory is inaccessible due to</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos"> 44</span></a><span class="sd">    optimizations or whose type is too complex.</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos"> 45</span></a><span class="sd">    Therefore this is a simpler implementation in Python to avoid GDB crashing.</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos"> 46</span></a>
</span><span id="L-47"><a href="#L-47"><span class="linenos"> 47</span></a><span class="sd">    ```</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos"> 48</span></a><span class="sd">    (gdb) px4_backtrace</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos"> 49</span></a><span class="sd">    #0  0x0800b3be in sched_unlock() at platforms/nuttx/NuttX/nuttx/sched/sched/sched_unlock.c:272</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos"> 50</span></a><span class="sd">    #1  0x0800b59e in nxsem_post() at platforms/nuttx/NuttX/nuttx/sched/semaphore/sem_post.c:175</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos"> 51</span></a><span class="sd">    #2  0x0800b5b6 in sem_post() at platforms/nuttx/NuttX/nuttx/sched/semaphore/sem_post.c:220</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos"> 52</span></a><span class="sd">    #3  0x08171570 in px4::WorkQueue::SignalWorkerThread() at platforms/common/px4_work_queue/WorkQueue.cpp:151</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos"> 53</span></a><span class="sd">    #4  0x08171570 in px4::WorkQueue::Add(px4::WorkItem*) at platforms/common/px4_work_queue/WorkQueue.cpp:143</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos"> 54</span></a><span class="sd">    #5  0x0816f8dc in px4::WorkItem::ScheduleNow() at platforms/common/include/px4_platform_common/px4_work_queue/WorkItem.hpp:69</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos"> 55</span></a><span class="sd">    #6  0x0816f8dc in uORB::SubscriptionCallbackWorkItem::call() at platforms/common/uORB/SubscriptionCallback.hpp:169</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos"> 56</span></a><span class="sd">    #7  0x0816f8dc in uORB::DeviceNode::write(file*, char const*, unsigned int) at platforms/common/uORB/uORBDeviceNode.cpp:221</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos"> 57</span></a><span class="sd">    #8  0x0816faca in uORB::DeviceNode::publish(orb_metadata const*, void*, void const*) at platforms/common/uORB/uORBDeviceNode.cpp:295</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos"> 58</span></a><span class="sd">    #9  0x081700bc in uORB::Manager::orb_publish(orb_metadata const*, void*, void const*) at platforms/common/uORB/uORBManager.cpp:409</span>
</span><span id="L-59"><a href="#L-59"><span class="linenos"> 59</span></a><span class="sd">    #10 0x0816e6d8 in orb_publish(orb_metadata const*, orb_advert_t, void const*) at platforms/common/uORB/uORBManager.hpp:193</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos"> 60</span></a><span class="sd">    #11 0x08160912 in uORB::PublicationMulti&lt;sensor_gyro_fifo_s, (unsigned char)4&gt;::publish(sensor_gyro_fifo_s const&amp;) at platforms/common/uORB/PublicationMulti.hpp:92</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos"> 61</span></a><span class="sd">    #12 0x08160912 in PX4Gyroscope::updateFIFO(sensor_gyro_fifo_s&amp;) at src/lib/drivers/gyroscope/PX4Gyroscope.cpp:149</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos"> 62</span></a><span class="sd">    #13 0x08040e74 in Bosch::BMI088::Gyroscope::BMI088_Gyroscope::FIFORead(unsigned long long const&amp;, unsigned char) at src/drivers/imu/bosch/bmi088/BMI088_Gyroscope.cpp:447</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos"> 63</span></a><span class="sd">    #14 0x08041102 in Bosch::BMI088::Gyroscope::BMI088_Gyroscope::RunImpl() at src/drivers/imu/bosch/bmi088/BMI088_Gyroscope.cpp:224</span>
</span><span id="L-64"><a href="#L-64"><span class="linenos"> 64</span></a><span class="sd">    #15 0x0803fb7a in I2CSPIDriver&lt;BMI088&gt;::Run() at platforms/common/include/px4_platform_common/i2c_spi_buses.h:343</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos"> 65</span></a><span class="sd">    #16 0x0817164c in px4::WorkQueue::Run() at platforms/common/px4_work_queue/WorkQueue.cpp:187</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos"> 66</span></a><span class="sd">    #17 0x08171798 in px4::WorkQueueRunner(void*) at platforms/common/px4_work_queue/WorkQueueManager.cpp:236</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos"> 67</span></a><span class="sd">    #18 0x08014ccc in pthread_startup() at platforms/nuttx/NuttX/nuttx/libs/libc/pthread/pthread_create.c:59</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos"> 68</span></a><span class="sd">    ```</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos"> 69</span></a>
</span><span id="L-70"><a href="#L-70"><span class="linenos"> 70</span></a><span class="sd">    :return: the selected frame&#39;s backtrace without resolving function argument</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos"> 71</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos"> 72</span></a>    <span class="n">frame</span> <span class="o">=</span> <span class="n">gdb</span><span class="o">.</span><span class="n">selected_frame</span><span class="p">()</span>
</span><span id="L-73"><a href="#L-73"><span class="linenos"> 73</span></a>    <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos"> 74</span></a>    <span class="n">output</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos"> 75</span></a>    <span class="k">while</span><span class="p">(</span><span class="n">frame</span> <span class="ow">and</span> <span class="n">frame</span><span class="o">.</span><span class="n">is_valid</span><span class="p">()):</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos"> 76</span></a>        <span class="n">pc</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">pc</span><span class="p">()</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos"> 77</span></a>        <span class="k">if</span> <span class="n">pc</span> <span class="o">&gt;</span> <span class="mh">0xffff_ff00</span><span class="p">:</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos"> 78</span></a>            <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;#</span><span class="si">{</span><span class="n">index</span><span class="si">:</span><span class="s2"> &lt;2</span><span class="si">}</span><span class="s2"> &lt;signal handler called&gt;&quot;</span><span class="p">)</span>
</span><span id="L-79"><a href="#L-79"><span class="linenos"> 79</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos"> 80</span></a>            <span class="n">line</span> <span class="o">=</span> <span class="s2">&quot;??&quot;</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos"> 81</span></a>            <span class="n">file</span> <span class="o">=</span> <span class="s2">&quot;??&quot;</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos"> 82</span></a>            <span class="k">if</span> <span class="n">sal</span> <span class="o">:=</span> <span class="n">frame</span><span class="o">.</span><span class="n">find_sal</span><span class="p">():</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos"> 83</span></a>                <span class="n">line</span> <span class="o">=</span> <span class="n">sal</span><span class="o">.</span><span class="n">line</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos"> 84</span></a>                <span class="k">if</span> <span class="n">sal</span><span class="o">.</span><span class="n">symtab</span><span class="p">:</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos"> 85</span></a>                    <span class="n">file</span> <span class="o">=</span> <span class="n">sal</span><span class="o">.</span><span class="n">symtab</span><span class="o">.</span><span class="n">fullname</span><span class="p">()</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos"> 86</span></a>            <span class="k">if</span> <span class="n">func</span> <span class="o">:=</span> <span class="n">frame</span><span class="o">.</span><span class="n">function</span><span class="p">():</span>
</span><span id="L-87"><a href="#L-87"><span class="linenos"> 87</span></a>                <span class="n">func</span> <span class="o">=</span> <span class="n">func</span><span class="o">.</span><span class="n">print_name</span>
</span><span id="L-88"><a href="#L-88"><span class="linenos"> 88</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">func</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;)&quot;</span><span class="p">):</span> <span class="n">func</span> <span class="o">+=</span> <span class="s2">&quot;()&quot;</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos"> 89</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos"> 90</span></a>                <span class="n">func</span> <span class="o">=</span> <span class="s2">&quot;??&quot;</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos"> 91</span></a>            <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;#</span><span class="si">{</span><span class="n">index</span><span class="si">:</span><span class="s2"> &lt;2</span><span class="si">}</span><span class="s2"> 0x</span><span class="si">{</span><span class="n">pc</span><span class="si">:</span><span class="s2">08x</span><span class="si">}</span><span class="s2"> in </span><span class="si">{</span><span class="n">func</span><span class="si">}</span><span class="s2"> at </span><span class="si">{</span><span class="n">file</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">line</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos"> 92</span></a>        <span class="n">frame</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">older</span><span class="p">()</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos"> 93</span></a>        <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos"> 94</span></a>    <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos"> 95</span></a>
</span><span id="L-96"><a href="#L-96"><span class="linenos"> 96</span></a><span class="k">def</span> <span class="nf">gdb_relative_location</span><span class="p">(</span><span class="n">gdb</span><span class="p">,</span> <span class="n">location</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos"> 97</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos"> 98</span></a><span class="sd">    GDB can only place breakpoint on specific line number inside a file.</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos"> 99</span></a><span class="sd">    However, if the file changes the line numbers can shift around, which makes</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos">100</span></a><span class="sd">    this method brittle. Therefore this function finds the function inside</span>
</span><span id="L-101"><a href="#L-101"><span class="linenos">101</span></a><span class="sd">    the file and applies a offset or searches for a pattern inside that function</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos">102</span></a><span class="sd">    to determine the correct line number.</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos">103</span></a>
</span><span id="L-104"><a href="#L-104"><span class="linenos">104</span></a><span class="sd">    :param location:</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos">105</span></a><span class="sd">        Location `function:+offset` or `function:regex`. In case the function</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos">106</span></a><span class="sd">        uses static linkage you may also need to provide a unique part of the</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos">107</span></a><span class="sd">        filename path to arbitrate multiple identically named static functions</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos">108</span></a><span class="sd">        `file:function:+offset` or `file:function:regex`.</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos">109</span></a>
</span><span id="L-110"><a href="#L-110"><span class="linenos">110</span></a><span class="sd">    :return: absolute location string `file:line_number`</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos">111</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos">112</span></a>    <span class="n">parts</span> <span class="o">=</span> <span class="n">location</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
</span><span id="L-113"><a href="#L-113"><span class="linenos">113</span></a>    <span class="n">file_name</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos">114</span></a>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos">115</span></a>        <span class="n">file_name</span><span class="p">,</span> <span class="n">function_name</span><span class="p">,</span> <span class="n">line_pattern</span> <span class="o">=</span> <span class="n">parts</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos">116</span></a>    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="L-117"><a href="#L-117"><span class="linenos">117</span></a>        <span class="n">function_name</span><span class="p">,</span> <span class="n">line_pattern</span> <span class="o">=</span> <span class="n">parts</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos">118</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos">119</span></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown location format &#39;</span><span class="si">{</span><span class="n">location</span><span class="si">}</span><span class="s2">&#39;!&quot;</span><span class="p">)()</span>
</span><span id="L-120"><a href="#L-120"><span class="linenos">120</span></a>
</span><span id="L-121"><a href="#L-121"><span class="linenos">121</span></a>    <span class="n">function</span> <span class="o">=</span> <span class="n">gdb</span><span class="o">.</span><span class="n">lookup_global_symbol</span><span class="p">(</span><span class="n">function_name</span><span class="p">,</span> <span class="n">gdb</span><span class="o">.</span><span class="n">SYMBOL_VAR_DOMAIN</span><span class="p">)</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos">122</span></a>    <span class="k">if</span> <span class="n">function</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-123"><a href="#L-123"><span class="linenos">123</span></a>        <span class="c1"># Multiple static symbols may exists, we use the filename to arbitrate</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos">124</span></a>        <span class="k">if</span> <span class="n">functions</span> <span class="o">:=</span> <span class="n">gdb</span><span class="o">.</span><span class="n">lookup_static_symbols</span><span class="p">(</span><span class="n">function_name</span><span class="p">,</span> <span class="n">gdb</span><span class="o">.</span><span class="n">SYMBOL_VAR_DOMAIN</span><span class="p">):</span>
</span><span id="L-125"><a href="#L-125"><span class="linenos">125</span></a>            <span class="n">file_functions</span> <span class="o">=</span> <span class="p">[(</span><span class="n">f</span><span class="o">.</span><span class="n">symtab</span><span class="o">.</span><span class="n">fullname</span><span class="p">(),</span> <span class="n">f</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">functions</span><span class="p">]</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos">126</span></a>            <span class="c1"># Arbitrate using file name hint</span>
</span><span id="L-127"><a href="#L-127"><span class="linenos">127</span></a>            <span class="k">if</span> <span class="n">file_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos">128</span></a>                <span class="n">file_functions</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">file_functions</span> <span class="k">if</span> <span class="n">file_name</span> <span class="ow">in</span> <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos">129</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">file_functions</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-130"><a href="#L-130"><span class="linenos">130</span></a>                <span class="n">function</span> <span class="o">=</span> <span class="n">file_functions</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos">131</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-132"><a href="#L-132"><span class="linenos">132</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Multiple functions found:</span><span class="se">\n</span><span class="s2"> - &quot;</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> - &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">functions</span><span class="p">))</span>
</span><span id="L-133"><a href="#L-133"><span class="linenos">133</span></a>    <span class="k">if</span> <span class="n">function</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos">134</span></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot find function name &#39;</span><span class="si">{</span><span class="n">function_name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos">135</span></a>    <span class="k">assert</span> <span class="n">function</span><span class="o">.</span><span class="n">is_function</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos">136</span></a>
</span><span id="L-137"><a href="#L-137"><span class="linenos">137</span></a>    <span class="c1"># Find source file and line numbers: how to use file_name?</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos">138</span></a>    <span class="n">file</span> <span class="o">=</span> <span class="n">function</span><span class="o">.</span><span class="n">symtab</span><span class="o">.</span><span class="n">fullname</span><span class="p">()</span>
</span><span id="L-139"><a href="#L-139"><span class="linenos">139</span></a>    <span class="n">line_numbers</span> <span class="o">=</span> <span class="n">function</span><span class="o">.</span><span class="n">symtab</span><span class="o">.</span><span class="n">linetable</span><span class="p">()</span><span class="o">.</span><span class="n">source_lines</span><span class="p">()</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos">140</span></a>    <span class="n">lmin</span><span class="p">,</span> <span class="n">lmax</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">line_numbers</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">line_numbers</span><span class="p">)</span>
</span><span id="L-141"><a href="#L-141"><span class="linenos">141</span></a>
</span><span id="L-142"><a href="#L-142"><span class="linenos">142</span></a>    <span class="k">if</span> <span class="n">line_pattern</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;+&quot;</span><span class="p">):</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos">143</span></a>        <span class="c1"># line offset relative to function</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos">144</span></a>        <span class="n">line</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">line_pattern</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span> <span class="o">+</span> <span class="n">function</span><span class="o">.</span><span class="n">line</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos">145</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="L-146"><a href="#L-146"><span class="linenos">146</span></a>        <span class="c1"># regex line pattern, read source file and find the line</span>
</span><span id="L-147"><a href="#L-147"><span class="linenos">147</span></a>        <span class="n">lines</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">file</span><span class="p">)</span><span class="o">.</span><span class="n">read_text</span><span class="p">()</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos">148</span></a>        <span class="n">lines</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">enumerate</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="n">lmin</span><span class="p">:</span><span class="n">lmax</span><span class="p">]))</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos">149</span></a>        <span class="k">for</span> <span class="n">ii</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos">150</span></a>            <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">line_pattern</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
</span><span id="L-151"><a href="#L-151"><span class="linenos">151</span></a>                <span class="n">line</span> <span class="o">=</span> <span class="n">lmin</span> <span class="o">+</span> <span class="n">ii</span>
</span><span id="L-152"><a href="#L-152"><span class="linenos">152</span></a>                <span class="k">break</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos">153</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos">154</span></a>            <span class="n">lines</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">  &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">lmin</span><span class="o">+</span><span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">:</span><span class="s2">&gt;4</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">l</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">)</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos">155</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot find source line for &#39;</span><span class="si">{</span><span class="n">line_pattern</span><span class="si">}</span><span class="s2">&#39;!</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos">156</span></a>                <span class="sa">f</span><span class="s2">&quot;Function &#39;</span><span class="si">{</span><span class="n">function_name</span><span class="si">}</span><span class="s2">&#39; stretches over lines </span><span class="si">{</span><span class="n">lmin</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">lmax</span><span class="si">}</span><span class="s2">.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos">157</span></a>                <span class="c1"># f&quot;Available source lines are:\n  {lines}&quot;)</span>
</span><span id="L-158"><a href="#L-158"><span class="linenos">158</span></a>
</span><span id="L-159"><a href="#L-159"><span class="linenos">159</span></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">file</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">line</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos">160</span></a>
</span><span id="L-161"><a href="#L-161"><span class="linenos">161</span></a>
</span><span id="L-162"><a href="#L-162"><span class="linenos">162</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-163"><a href="#L-163"><span class="linenos">163</span></a><span class="k">def</span> <span class="nf">_binary_search</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">lo</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">hi</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">direction</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos">164</span></a>    <span class="n">middle</span> <span class="o">=</span> <span class="p">(</span><span class="n">lo</span> <span class="o">+</span> <span class="n">hi</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
</span><span id="L-165"><a href="#L-165"><span class="linenos">165</span></a>    <span class="k">if</span> <span class="n">hi</span> <span class="o">-</span> <span class="n">lo</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span> <span class="k">return</span> <span class="n">middle</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos">166</span></a>
</span><span id="L-167"><a href="#L-167"><span class="linenos">167</span></a>    <span class="n">nslice</span> <span class="o">=</span> <span class="p">[(</span><span class="n">lo</span><span class="p">,</span> <span class="n">middle</span><span class="p">),</span> <span class="p">(</span><span class="n">middle</span><span class="p">,</span> <span class="n">hi</span><span class="p">)]</span>
</span><span id="L-168"><a href="#L-168"><span class="linenos">168</span></a>    <span class="n">pick_lower_half</span> <span class="o">=</span> <span class="n">array</span><span class="p">[</span><span class="n">middle</span><span class="p">]</span> <span class="o">==</span> <span class="n">value</span>
</span><span id="L-169"><a href="#L-169"><span class="linenos">169</span></a>    <span class="k">if</span> <span class="n">direction</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span> <span class="n">pick_lower_half</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">pick_lower_half</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos">170</span></a>
</span><span id="L-171"><a href="#L-171"><span class="linenos">171</span></a>    <span class="n">lo</span><span class="p">,</span> <span class="n">hi</span> <span class="o">=</span> <span class="n">nslice</span><span class="p">[</span><span class="n">pick_lower_half</span><span class="p">]</span>
</span><span id="L-172"><a href="#L-172"><span class="linenos">172</span></a>    <span class="k">return</span> <span class="n">_binary_search</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">lo</span><span class="p">,</span> <span class="n">hi</span><span class="p">,</span> <span class="n">direction</span><span class="p">)</span>
</span><span id="L-173"><a href="#L-173"><span class="linenos">173</span></a>
</span><span id="L-174"><a href="#L-174"><span class="linenos">174</span></a><span class="k">def</span> <span class="nf">binary_search_last</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">lo</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">hi</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-175"><a href="#L-175"><span class="linenos">175</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Binary search the last occurrance of value in an array&quot;&quot;&quot;</span>
</span><span id="L-176"><a href="#L-176"><span class="linenos">176</span></a>    <span class="k">if</span> <span class="n">lo</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="n">lo</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos">177</span></a>    <span class="k">if</span> <span class="n">hi</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="n">hi</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos">178</span></a>    <span class="k">return</span> <span class="n">_binary_search</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">lo</span><span class="p">,</span> <span class="n">hi</span><span class="p">,</span> <span class="n">direction</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-179"><a href="#L-179"><span class="linenos">179</span></a>
</span><span id="L-180"><a href="#L-180"><span class="linenos">180</span></a><span class="k">def</span> <span class="nf">binary_search_first</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">lo</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">hi</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-181"><a href="#L-181"><span class="linenos">181</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Binary search the first occurrance of value in an array&quot;&quot;&quot;</span>
</span><span id="L-182"><a href="#L-182"><span class="linenos">182</span></a>    <span class="k">if</span> <span class="n">lo</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="n">lo</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos">183</span></a>    <span class="k">if</span> <span class="n">hi</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="n">hi</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>
</span><span id="L-184"><a href="#L-184"><span class="linenos">184</span></a>    <span class="k">return</span> <span class="n">_binary_search</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">lo</span><span class="p">,</span> <span class="n">hi</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-185"><a href="#L-185"><span class="linenos">185</span></a>
</span><span id="L-186"><a href="#L-186"><span class="linenos">186</span></a>
</span><span id="L-187"><a href="#L-187"><span class="linenos">187</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos">188</span></a><span class="k">def</span> <span class="nf">chunks</span><span class="p">(</span><span class="n">iterable</span><span class="p">,</span> <span class="n">chunk_size</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-189"><a href="#L-189"><span class="linenos">189</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert a iterable into a list of chunks and fill the rest with a value&quot;&quot;&quot;</span>
</span><span id="L-190"><a href="#L-190"><span class="linenos">190</span></a>    <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="nb">iter</span><span class="p">(</span><span class="n">iterable</span><span class="p">)]</span> <span class="o">*</span> <span class="n">chunk_size</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos">191</span></a>    <span class="k">return</span> <span class="n">zip_longest</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">fillvalue</span><span class="o">=</span><span class="n">fill</span><span class="p">)</span>
</span><span id="L-192"><a href="#L-192"><span class="linenos">192</span></a>
</span><span id="L-193"><a href="#L-193"><span class="linenos">193</span></a>
</span><span id="L-194"><a href="#L-194"><span class="linenos">194</span></a><span class="k">def</span> <span class="nf">add_datetime</span><span class="p">(</span><span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="o">|</span><span class="n">Path</span><span class="p">):</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos">195</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-196"><a href="#L-196"><span class="linenos">196</span></a><span class="sd">    Appends a filename with the current date and time:</span>
</span><span id="L-197"><a href="#L-197"><span class="linenos">197</span></a><span class="sd">    `Year_Month_Day_Hour_Minute_Second`</span>
</span><span id="L-198"><a href="#L-198"><span class="linenos">198</span></a>
</span><span id="L-199"><a href="#L-199"><span class="linenos">199</span></a><span class="sd">    Example: `path/name.txt` -&gt; `path/name_2023_04_14_15_03_24.txt`</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos">200</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-201"><a href="#L-201"><span class="linenos">201</span></a>    <span class="n">filename</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos">202</span></a>    <span class="k">return</span> <span class="n">filename</span><span class="o">.</span><span class="n">with_stem</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">filename</span><span class="o">.</span><span class="n">stem</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y_%m_</span><span class="si">%d</span><span class="s1">_%H_%M_%S&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos">203</span></a>
</span><span id="L-204"><a href="#L-204"><span class="linenos">204</span></a>
</span><span id="L-205"><a href="#L-205"><span class="linenos">205</span></a><span class="k">def</span> <span class="nf">format_units</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">prefixes</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos">206</span></a>                 <span class="n">unit</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">fmt</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">if_zero</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos">207</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-208"><a href="#L-208"><span class="linenos">208</span></a><span class="sd">    Format a value with the largest prefix.</span>
</span><span id="L-209"><a href="#L-209"><span class="linenos">209</span></a>
</span><span id="L-210"><a href="#L-210"><span class="linenos">210</span></a><span class="sd">    The value is divided by the list of prefixes until it is smaller than the</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos">211</span></a><span class="sd">    next largest prefix. Trailing zeros are replaced by spaces and padding is</span>
</span><span id="L-212"><a href="#L-212"><span class="linenos">212</span></a><span class="sd">    applied to align the prefixes and units. If the value is zero, the</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos">213</span></a><span class="sd">    `if_zero` string is returned if defined.</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos">214</span></a>
</span><span id="L-215"><a href="#L-215"><span class="linenos">215</span></a><span class="sd">    Predefined prefixes can be passed as a `group:input-prefix`:</span>
</span><span id="L-216"><a href="#L-216"><span class="linenos">216</span></a><span class="sd">    - `t`: time prefixes from nanoseconds to days.</span>
</span><span id="L-217"><a href="#L-217"><span class="linenos">217</span></a><span class="sd">    - `si`: SI prefixes from nano to Tera.</span>
</span><span id="L-218"><a href="#L-218"><span class="linenos">218</span></a>
</span><span id="L-219"><a href="#L-219"><span class="linenos">219</span></a><span class="sd">    .. note:: The micro prefix is µ, not u.</span>
</span><span id="L-220"><a href="#L-220"><span class="linenos">220</span></a>
</span><span id="L-221"><a href="#L-221"><span class="linenos">221</span></a><span class="sd">    Example:</span>
</span><span id="L-222"><a href="#L-222"><span class="linenos">222</span></a>
</span><span id="L-223"><a href="#L-223"><span class="linenos">223</span></a><span class="sd">    ```py</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos">224</span></a><span class="sd">    format_units(123456, &quot;t:µs&quot;, fmt=&quot;.1f&quot;)    # &quot;123.5ms&quot;</span>
</span><span id="L-225"><a href="#L-225"><span class="linenos">225</span></a><span class="sd">    format_units(0, &quot;t:s&quot;, if_zero=&quot;-&quot;)        # &quot;-&quot;</span>
</span><span id="L-226"><a href="#L-226"><span class="linenos">226</span></a><span class="sd">    format_units(1234, &quot;si:&quot;, &quot;Hz&quot;, fmt=&quot;.2f&quot;) # &quot;1.23kHz&quot;</span>
</span><span id="L-227"><a href="#L-227"><span class="linenos">227</span></a><span class="sd">    format_units(1001, &quot;si:&quot;, &quot;Hz&quot;, fmt=&quot;.2f&quot;) # &quot;1   kHz&quot;</span>
</span><span id="L-228"><a href="#L-228"><span class="linenos">228</span></a><span class="sd">    format_units(2345, {&quot;k&quot;: 1e3, &quot;M&quot;: 1e3}, &quot;Si&quot;, fmt=&quot;.1f&quot;) # &quot;2.3MSi&quot;</span>
</span><span id="L-229"><a href="#L-229"><span class="linenos">229</span></a><span class="sd">    ```</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos">230</span></a>
</span><span id="L-231"><a href="#L-231"><span class="linenos">231</span></a><span class="sd">    :param value: An integer or floating point value. If None, an empty string is returned.</span>
</span><span id="L-232"><a href="#L-232"><span class="linenos">232</span></a><span class="sd">    :param prefixes:</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos">233</span></a><span class="sd">        A dictionary of prefix string to ratio of the next largest prefix. The</span>
</span><span id="L-234"><a href="#L-234"><span class="linenos">234</span></a><span class="sd">        dictionary must be sorted from smallest to largest prefix. The prefix of</span>
</span><span id="L-235"><a href="#L-235"><span class="linenos">235</span></a><span class="sd">        the input value must be the first entry.</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos">236</span></a><span class="sd">    :param unit: A unit string to be appended to the formatted value.</span>
</span><span id="L-237"><a href="#L-237"><span class="linenos">237</span></a><span class="sd">    :param fmt: A format specifier to be applied when formatting the value.</span>
</span><span id="L-238"><a href="#L-238"><span class="linenos">238</span></a><span class="sd">    :param if_zero: A string to be returned when the value is zero.</span>
</span><span id="L-239"><a href="#L-239"><span class="linenos">239</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-240"><a href="#L-240"><span class="linenos">240</span></a>    <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="k">return</span> <span class="s2">&quot;&quot;</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos">241</span></a>    <span class="k">if</span> <span class="n">if_zero</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">value</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="k">return</span> <span class="n">if_zero</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos">242</span></a>
</span><span id="L-243"><a href="#L-243"><span class="linenos">243</span></a>    <span class="c1"># Find the correct prefix from a list of predefined common prefixes</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos">244</span></a>    <span class="n">_found</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos">245</span></a>    <span class="k">if</span> <span class="n">prefixes</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;t:&quot;</span><span class="p">):</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos">246</span></a>        <span class="n">time_units</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;ns&quot;</span><span class="p">:</span> <span class="mf">1e3</span><span class="p">,</span> <span class="s2">&quot;µs&quot;</span><span class="p">:</span> <span class="mf">1e3</span><span class="p">,</span> <span class="s2">&quot;ms&quot;</span><span class="p">:</span> <span class="mf">1e3</span><span class="p">,</span> <span class="s2">&quot;s&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span> <span class="s2">&quot;m&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span> <span class="s2">&quot;h&quot;</span><span class="p">:</span> <span class="mi">24</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">:</span> <span class="mf">365.25</span><span class="o">/</span><span class="mi">12</span><span class="p">}</span>
</span><span id="L-247"><a href="#L-247"><span class="linenos">247</span></a>        <span class="n">prefixes</span> <span class="o">=</span> <span class="n">prefixes</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos">248</span></a>        <span class="n">prefixes</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span><span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">time_units</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">_found</span> <span class="ow">or</span> <span class="p">(</span><span class="n">_found</span> <span class="o">:=</span> <span class="p">(</span><span class="n">k</span> <span class="o">==</span> <span class="n">prefixes</span><span class="p">))}</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos">249</span></a>    <span class="k">elif</span> <span class="n">prefixes</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;si:&quot;</span><span class="p">):</span>
</span><span id="L-250"><a href="#L-250"><span class="linenos">250</span></a>        <span class="n">prefixes</span> <span class="o">=</span> <span class="n">prefixes</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-251"><a href="#L-251"><span class="linenos">251</span></a>        <span class="n">prefixes</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span><span class="mf">1e3</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;n&quot;</span><span class="p">,</span> <span class="s2">&quot;µ&quot;</span><span class="p">,</span> <span class="s2">&quot;m&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;k&quot;</span><span class="p">,</span> <span class="s2">&quot;M&quot;</span><span class="p">,</span> <span class="s2">&quot;G&quot;</span><span class="p">,</span> <span class="s2">&quot;T&quot;</span><span class="p">]</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos">252</span></a>                    <span class="k">if</span> <span class="n">_found</span> <span class="ow">or</span> <span class="p">(</span><span class="n">_found</span> <span class="o">:=</span> <span class="p">(</span><span class="n">k</span> <span class="o">==</span> <span class="n">prefixes</span><span class="p">))}</span>
</span><span id="L-253"><a href="#L-253"><span class="linenos">253</span></a>
</span><span id="L-254"><a href="#L-254"><span class="linenos">254</span></a>    <span class="c1"># Divide the value until it is smaller than the next largest prefix</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos">255</span></a>    <span class="k">for</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">factor</span> <span class="ow">in</span> <span class="n">prefixes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="L-256"><a href="#L-256"><span class="linenos">256</span></a>        <span class="k">if</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="n">factor</span><span class="p">:</span> <span class="k">break</span>
</span><span id="L-257"><a href="#L-257"><span class="linenos">257</span></a>        <span class="n">value</span> <span class="o">/=</span> <span class="n">factor</span>
</span><span id="L-258"><a href="#L-258"><span class="linenos">258</span></a>
</span><span id="L-259"><a href="#L-259"><span class="linenos">259</span></a>    <span class="c1"># Format the value</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos">260</span></a>    <span class="n">value</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">value</span><span class="si">:{</span><span class="n">fmt</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}}</span><span class="s2">&quot;</span>
</span><span id="L-261"><a href="#L-261"><span class="linenos">261</span></a>    <span class="n">value_stripped</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos">262</span></a>    <span class="k">if</span> <span class="n">if_zero</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">value_stripped</span> <span class="o">==</span> <span class="s2">&quot;0&quot;</span><span class="p">:</span> <span class="k">return</span> <span class="n">if_zero</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos">263</span></a>    <span class="c1"># pad the value to the right to align it</span>
</span><span id="L-264"><a href="#L-264"><span class="linenos">264</span></a>    <span class="n">padding</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">prefixes</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span>
</span><span id="L-265"><a href="#L-265"><span class="linenos">265</span></a>    <span class="n">padding</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">value_stripped</span><span class="p">)</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos">266</span></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">value_stripped</span><span class="si">}{</span><span class="n">padding</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="si">}{</span><span class="n">prefix</span><span class="si">}{</span><span class="n">unit</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="L-267"><a href="#L-267"><span class="linenos">267</span></a>
</span><span id="L-268"><a href="#L-268"><span class="linenos">268</span></a>
</span><span id="L-269"><a href="#L-269"><span class="linenos">269</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-270"><a href="#L-270"><span class="linenos">270</span></a><span class="k">def</span> <span class="nf">format_table</span><span class="p">(</span><span class="n">fmtstr</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">header</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">rows</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span> <span class="n">columns</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-271"><a href="#L-271"><span class="linenos">271</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos">272</span></a><span class="sd">    DEPRECATED: Use `rich.table.Table` instead!</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos">273</span></a>
</span><span id="L-274"><a href="#L-274"><span class="linenos">274</span></a><span class="sd">    Formats a list of rows into a table of multiple meta-columns based on the format string.</span>
</span><span id="L-275"><a href="#L-275"><span class="linenos">275</span></a><span class="sd">    Example for formatting an array of registers into a table with three meta-columns:</span>
</span><span id="L-276"><a href="#L-276"><span class="linenos">276</span></a>
</span><span id="L-277"><a href="#L-277"><span class="linenos">277</span></a><span class="sd">    ```py</span>
</span><span id="L-278"><a href="#L-278"><span class="linenos">278</span></a><span class="sd">    fmtstr = &quot;{:%d}  {:&gt;%d}  {:&gt;%d}&quot;</span>
</span><span id="L-279"><a href="#L-279"><span class="linenos">279</span></a><span class="sd">    header = [&quot;NAME&quot;, &quot;HEX VALUE&quot;, &quot;INT VALUE&quot;]</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos">280</span></a><span class="sd">    rows = [[reg, hex(value), value] for reg, value in registers.items()]</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos">281</span></a><span class="sd">    table = utils.format_table(fmtstr, header, rows, 3)</span>
</span><span id="L-282"><a href="#L-282"><span class="linenos">282</span></a><span class="sd">    ```</span>
</span><span id="L-283"><a href="#L-283"><span class="linenos">283</span></a>
</span><span id="L-284"><a href="#L-284"><span class="linenos">284</span></a><span class="sd">    :param fmtstr: A string describing the spacing between columns and their</span>
</span><span id="L-285"><a href="#L-285"><span class="linenos">285</span></a><span class="sd">                   alignment. Must have exactly as many entries as the header a</span>
</span><span id="L-286"><a href="#L-286"><span class="linenos">286</span></a><span class="sd">                   rows. Example: two columns, aligned right and left with a</span>
</span><span id="L-287"><a href="#L-287"><span class="linenos">287</span></a><span class="sd">                   brace formatter: `&quot;{:&gt;%d} ({:%d})&quot;` The `%d` is replaced by</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos">288</span></a><span class="sd">                   the max column width by this function.</span>
</span><span id="L-289"><a href="#L-289"><span class="linenos">289</span></a><span class="sd">    :param header: A list of names for the header row. If you specify more than</span>
</span><span id="L-290"><a href="#L-290"><span class="linenos">290</span></a><span class="sd">                   one column, the header will be duplicated.</span>
</span><span id="L-291"><a href="#L-291"><span class="linenos">291</span></a><span class="sd">    :param rows: a list of lists of entries in the table. Each entry will be</span>
</span><span id="L-292"><a href="#L-292"><span class="linenos">292</span></a><span class="sd">                 converted to `str` to count the maximal length of each column.</span>
</span><span id="L-293"><a href="#L-293"><span class="linenos">293</span></a><span class="sd">    :param columns: If a table is very long, the header can be duplicated to the</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos">294</span></a><span class="sd">                    right side of the table to fill more screen space.</span>
</span><span id="L-295"><a href="#L-295"><span class="linenos">295</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-296"><a href="#L-296"><span class="linenos">296</span></a>    <span class="c1"># duplicate and join the format string for each column</span>
</span><span id="L-297"><a href="#L-297"><span class="linenos">297</span></a>    <span class="n">split_horizontal</span> <span class="o">=</span> <span class="n">columns</span> <span class="o">&gt;</span> <span class="mi">0</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos">298</span></a>    <span class="n">columns</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span>
</span><span id="L-299"><a href="#L-299"><span class="linenos">299</span></a>    <span class="n">fmtstr</span> <span class="o">=</span> <span class="s2">&quot;      :      &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">fmtstr</span><span class="p">]</span> <span class="o">*</span> <span class="n">columns</span><span class="p">)</span>
</span><span id="L-300"><a href="#L-300"><span class="linenos">300</span></a>    <span class="n">fmtcnt</span> <span class="o">=</span> <span class="n">fmtstr</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="L-301"><a href="#L-301"><span class="linenos">301</span></a>    <span class="n">column_width</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">fmtcnt</span>
</span><span id="L-302"><a href="#L-302"><span class="linenos">302</span></a>
</span><span id="L-303"><a href="#L-303"><span class="linenos">303</span></a>    <span class="c1"># Interleave the rows for the later chunking</span>
</span><span id="L-304"><a href="#L-304"><span class="linenos">304</span></a>    <span class="n">fill</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">fmtcnt</span> <span class="o">//</span> <span class="n">columns</span><span class="p">)</span>
</span><span id="L-305"><a href="#L-305"><span class="linenos">305</span></a>    <span class="k">if</span> <span class="n">split_horizontal</span><span class="p">:</span>
</span><span id="L-306"><a href="#L-306"><span class="linenos">306</span></a>        <span class="n">rows</span> <span class="o">=</span> <span class="p">[</span><span class="n">val</span> <span class="k">for</span> <span class="n">tup</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">chunks</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span> <span class="o">/</span> <span class="n">columns</span><span class="p">),</span> <span class="n">fill</span><span class="p">))</span> <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">tup</span><span class="p">]</span>
</span><span id="L-307"><a href="#L-307"><span class="linenos">307</span></a>    <span class="c1"># prepend the duplicated header before the rows</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos">308</span></a>    <span class="k">if</span> <span class="n">header</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-309"><a href="#L-309"><span class="linenos">309</span></a>        <span class="n">rows</span> <span class="o">=</span> <span class="p">[</span><span class="n">header</span><span class="p">]</span> <span class="o">*</span> <span class="n">columns</span> <span class="o">+</span> <span class="n">rows</span>
</span><span id="L-310"><a href="#L-310"><span class="linenos">310</span></a>    <span class="c1"># Group the individual rows into multiple columns per row</span>
</span><span id="L-311"><a href="#L-311"><span class="linenos">311</span></a>    <span class="n">rows</span> <span class="o">=</span> <span class="p">[</span><span class="nb">sum</span><span class="p">(</span><span class="n">rs</span><span class="p">,</span> <span class="p">[])</span> <span class="k">for</span> <span class="n">rs</span> <span class="ow">in</span> <span class="n">chunks</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">columns</span><span class="p">,</span> <span class="n">fill</span><span class="p">)]</span>
</span><span id="L-312"><a href="#L-312"><span class="linenos">312</span></a>
</span><span id="L-313"><a href="#L-313"><span class="linenos">313</span></a>    <span class="c1"># collect each line and compute the column width</span>
</span><span id="L-314"><a href="#L-314"><span class="linenos">314</span></a>    <span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-315"><a href="#L-315"><span class="linenos">315</span></a>    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
</span><span id="L-316"><a href="#L-316"><span class="linenos">316</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">row</span><span class="p">)</span> <span class="o">!=</span> <span class="n">fmtcnt</span><span class="p">:</span>
</span><span id="L-317"><a href="#L-317"><span class="linenos">317</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Each row have the same number of entries as the format string&quot;</span><span class="p">)</span>
</span><span id="L-318"><a href="#L-318"><span class="linenos">318</span></a>        <span class="n">line</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">l</span><span class="p">)</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">row</span><span class="p">]</span>
</span><span id="L-319"><a href="#L-319"><span class="linenos">319</span></a>        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span id="L-320"><a href="#L-320"><span class="linenos">320</span></a>        <span class="n">column_width</span> <span class="o">=</span> <span class="p">[</span><span class="nb">max</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">l</span><span class="p">))</span> <span class="k">for</span> <span class="n">w</span><span class="p">,</span> <span class="n">l</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">column_width</span><span class="p">,</span> <span class="n">line</span><span class="p">)]</span>
</span><span id="L-321"><a href="#L-321"><span class="linenos">321</span></a>
</span><span id="L-322"><a href="#L-322"><span class="linenos">322</span></a>    <span class="c1"># Format the format string with the column width first</span>
</span><span id="L-323"><a href="#L-323"><span class="linenos">323</span></a>    <span class="n">fmtstr</span> <span class="o">=</span> <span class="n">fmtstr</span> <span class="o">%</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">column_width</span><span class="p">)</span>
</span><span id="L-324"><a href="#L-324"><span class="linenos">324</span></a>    <span class="c1"># Now format the actual lines with the formatted format string</span>
</span><span id="L-325"><a href="#L-325"><span class="linenos">325</span></a>    <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">fmtstr</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">*</span><span class="n">line</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="L-326"><a href="#L-326"><span class="linenos">326</span></a>
</span><span id="L-327"><a href="#L-327"><span class="linenos">327</span></a>
</span><span id="L-328"><a href="#L-328"><span class="linenos">328</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-329"><a href="#L-329"><span class="linenos">329</span></a><span class="k">class</span> <span class="nc">_Singleton</span><span class="p">(</span><span class="nb">type</span><span class="p">):</span>
</span><span id="L-330"><a href="#L-330"><span class="linenos">330</span></a>    <span class="n">_instances</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-331"><a href="#L-331"><span class="linenos">331</span></a>    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="L-332"><a href="#L-332"><span class="linenos">332</span></a>        <span class="k">if</span> <span class="bp">cls</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instances</span><span class="p">:</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos">333</span></a>            <span class="bp">cls</span><span class="o">.</span><span class="n">_instances</span><span class="p">[</span><span class="bp">cls</span><span class="p">]</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">_Singleton</span><span class="p">,</span> <span class="bp">cls</span><span class="p">)</span><span class="o">.</span><span class="fm">__call__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos">334</span></a>        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instances</span><span class="p">[</span><span class="bp">cls</span><span class="p">]</span>
</span></pre></div>


            </section>
                <section id="gdb_getfield">
                            <input id="gdb_getfield-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">gdb_getfield</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">value</span><span class="p">:</span> <span class="s2">&quot;&#39;gdb.Value&#39;&quot;</span>, </span><span class="param"><span class="n">name</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">default</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="gdb_getfield-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#gdb_getfield"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="gdb_getfield-15"><a href="#gdb_getfield-15"><span class="linenos">15</span></a><span class="k">def</span> <span class="nf">gdb_getfield</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="s2">&quot;gdb.Value&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="gdb_getfield-16"><a href="#gdb_getfield-16"><span class="linenos">16</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Find the field of a struct/class by name&quot;&quot;&quot;</span>
</span><span id="gdb_getfield-17"><a href="#gdb_getfield-17"><span class="linenos">17</span></a>    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">value</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">fields</span><span class="p">():</span>
</span><span id="gdb_getfield-18"><a href="#gdb_getfield-18"><span class="linenos">18</span></a>        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
</span><span id="gdb_getfield-19"><a href="#gdb_getfield-19"><span class="linenos">19</span></a>            <span class="k">return</span> <span class="n">value</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
</span><span id="gdb_getfield-20"><a href="#gdb_getfield-20"><span class="linenos">20</span></a>    <span class="k">return</span> <span class="n">default</span>
</span></pre></div>


            <div class="docstring"><p>Find the field of a struct/class by name</p>
</div>


                </section>
                <section id="gdb_iter">
                            <input id="gdb_iter-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">gdb_iter</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">obj</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="gdb_iter-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#gdb_iter"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="gdb_iter-23"><a href="#gdb_iter-23"><span class="linenos">23</span></a><span class="k">def</span> <span class="nf">gdb_iter</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
</span><span id="gdb_iter-24"><a href="#gdb_iter-24"><span class="linenos">24</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;yields the values in an array or value with a range&quot;&quot;&quot;</span>
</span><span id="gdb_iter-25"><a href="#gdb_iter-25"><span class="linenos">25</span></a>    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">):</span>
</span><span id="gdb_iter-26"><a href="#gdb_iter-26"><span class="linenos">26</span></a>        <span class="n">obj</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">value</span><span class="p">()</span>
</span><span id="gdb_iter-27"><a href="#gdb_iter-27"><span class="linenos">27</span></a>    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="s2">&quot;range&quot;</span><span class="p">):</span>
</span><span id="gdb_iter-28"><a href="#gdb_iter-28"><span class="linenos">28</span></a>        <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="o">*</span><span class="n">obj</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">range</span><span class="p">()):</span>
</span><span id="gdb_iter-29"><a href="#gdb_iter-29"><span class="linenos">29</span></a>            <span class="k">yield</span> <span class="n">obj</span><span class="p">[</span><span class="n">ii</span><span class="p">]</span>
</span><span id="gdb_iter-30"><a href="#gdb_iter-30"><span class="linenos">30</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="gdb_iter-31"><a href="#gdb_iter-31"><span class="linenos">31</span></a>        <span class="k">return</span> <span class="p">[]</span>
</span></pre></div>


            <div class="docstring"><p>yields the values in an array or value with a range</p>
</div>


                </section>
                <section id="gdb_len">
                            <input id="gdb_len-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">gdb_len</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">obj</span></span><span class="return-annotation">) -> <span class="nb">int</span>:</span></span>

                <label class="view-source-button" for="gdb_len-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#gdb_len"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="gdb_len-33"><a href="#gdb_len-33"><span class="linenos">33</span></a><span class="k">def</span> <span class="nf">gdb_len</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="gdb_len-34"><a href="#gdb_len-34"><span class="linenos">34</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Computes the length of a gdb object&quot;&quot;&quot;</span>
</span><span id="gdb_len-35"><a href="#gdb_len-35"><span class="linenos">35</span></a>    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="s2">&quot;range&quot;</span><span class="p">):</span>
</span><span id="gdb_len-36"><a href="#gdb_len-36"><span class="linenos">36</span></a>        <span class="n">start</span><span class="p">,</span> <span class="n">stop</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">range</span><span class="p">()</span>
</span><span id="gdb_len-37"><a href="#gdb_len-37"><span class="linenos">37</span></a>        <span class="k">return</span> <span class="n">stop</span> <span class="o">-</span> <span class="n">start</span>
</span><span id="gdb_len-38"><a href="#gdb_len-38"><span class="linenos">38</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="gdb_len-39"><a href="#gdb_len-39"><span class="linenos">39</span></a>        <span class="k">return</span> <span class="mi">1</span>
</span></pre></div>


            <div class="docstring"><p>Computes the length of a gdb object</p>
</div>


                </section>
                <section id="gdb_backtrace">
                            <input id="gdb_backtrace-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">gdb_backtrace</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">gdb</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="gdb_backtrace-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#gdb_backtrace"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="gdb_backtrace-41"><a href="#gdb_backtrace-41"><span class="linenos">41</span></a><span class="k">def</span> <span class="nf">gdb_backtrace</span><span class="p">(</span><span class="n">gdb</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="gdb_backtrace-42"><a href="#gdb_backtrace-42"><span class="linenos">42</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="gdb_backtrace-43"><a href="#gdb_backtrace-43"><span class="linenos">43</span></a><span class="sd">    Unfortunately the built-in gdb command `backtrace` often crashes when</span>
</span><span id="gdb_backtrace-44"><a href="#gdb_backtrace-44"><span class="linenos">44</span></a><span class="sd">    trying to resolve function arguments whose memory is inaccessible due to</span>
</span><span id="gdb_backtrace-45"><a href="#gdb_backtrace-45"><span class="linenos">45</span></a><span class="sd">    optimizations or whose type is too complex.</span>
</span><span id="gdb_backtrace-46"><a href="#gdb_backtrace-46"><span class="linenos">46</span></a><span class="sd">    Therefore this is a simpler implementation in Python to avoid GDB crashing.</span>
</span><span id="gdb_backtrace-47"><a href="#gdb_backtrace-47"><span class="linenos">47</span></a>
</span><span id="gdb_backtrace-48"><a href="#gdb_backtrace-48"><span class="linenos">48</span></a><span class="sd">    ```</span>
</span><span id="gdb_backtrace-49"><a href="#gdb_backtrace-49"><span class="linenos">49</span></a><span class="sd">    (gdb) px4_backtrace</span>
</span><span id="gdb_backtrace-50"><a href="#gdb_backtrace-50"><span class="linenos">50</span></a><span class="sd">    #0  0x0800b3be in sched_unlock() at platforms/nuttx/NuttX/nuttx/sched/sched/sched_unlock.c:272</span>
</span><span id="gdb_backtrace-51"><a href="#gdb_backtrace-51"><span class="linenos">51</span></a><span class="sd">    #1  0x0800b59e in nxsem_post() at platforms/nuttx/NuttX/nuttx/sched/semaphore/sem_post.c:175</span>
</span><span id="gdb_backtrace-52"><a href="#gdb_backtrace-52"><span class="linenos">52</span></a><span class="sd">    #2  0x0800b5b6 in sem_post() at platforms/nuttx/NuttX/nuttx/sched/semaphore/sem_post.c:220</span>
</span><span id="gdb_backtrace-53"><a href="#gdb_backtrace-53"><span class="linenos">53</span></a><span class="sd">    #3  0x08171570 in px4::WorkQueue::SignalWorkerThread() at platforms/common/px4_work_queue/WorkQueue.cpp:151</span>
</span><span id="gdb_backtrace-54"><a href="#gdb_backtrace-54"><span class="linenos">54</span></a><span class="sd">    #4  0x08171570 in px4::WorkQueue::Add(px4::WorkItem*) at platforms/common/px4_work_queue/WorkQueue.cpp:143</span>
</span><span id="gdb_backtrace-55"><a href="#gdb_backtrace-55"><span class="linenos">55</span></a><span class="sd">    #5  0x0816f8dc in px4::WorkItem::ScheduleNow() at platforms/common/include/px4_platform_common/px4_work_queue/WorkItem.hpp:69</span>
</span><span id="gdb_backtrace-56"><a href="#gdb_backtrace-56"><span class="linenos">56</span></a><span class="sd">    #6  0x0816f8dc in uORB::SubscriptionCallbackWorkItem::call() at platforms/common/uORB/SubscriptionCallback.hpp:169</span>
</span><span id="gdb_backtrace-57"><a href="#gdb_backtrace-57"><span class="linenos">57</span></a><span class="sd">    #7  0x0816f8dc in uORB::DeviceNode::write(file*, char const*, unsigned int) at platforms/common/uORB/uORBDeviceNode.cpp:221</span>
</span><span id="gdb_backtrace-58"><a href="#gdb_backtrace-58"><span class="linenos">58</span></a><span class="sd">    #8  0x0816faca in uORB::DeviceNode::publish(orb_metadata const*, void*, void const*) at platforms/common/uORB/uORBDeviceNode.cpp:295</span>
</span><span id="gdb_backtrace-59"><a href="#gdb_backtrace-59"><span class="linenos">59</span></a><span class="sd">    #9  0x081700bc in uORB::Manager::orb_publish(orb_metadata const*, void*, void const*) at platforms/common/uORB/uORBManager.cpp:409</span>
</span><span id="gdb_backtrace-60"><a href="#gdb_backtrace-60"><span class="linenos">60</span></a><span class="sd">    #10 0x0816e6d8 in orb_publish(orb_metadata const*, orb_advert_t, void const*) at platforms/common/uORB/uORBManager.hpp:193</span>
</span><span id="gdb_backtrace-61"><a href="#gdb_backtrace-61"><span class="linenos">61</span></a><span class="sd">    #11 0x08160912 in uORB::PublicationMulti&lt;sensor_gyro_fifo_s, (unsigned char)4&gt;::publish(sensor_gyro_fifo_s const&amp;) at platforms/common/uORB/PublicationMulti.hpp:92</span>
</span><span id="gdb_backtrace-62"><a href="#gdb_backtrace-62"><span class="linenos">62</span></a><span class="sd">    #12 0x08160912 in PX4Gyroscope::updateFIFO(sensor_gyro_fifo_s&amp;) at src/lib/drivers/gyroscope/PX4Gyroscope.cpp:149</span>
</span><span id="gdb_backtrace-63"><a href="#gdb_backtrace-63"><span class="linenos">63</span></a><span class="sd">    #13 0x08040e74 in Bosch::BMI088::Gyroscope::BMI088_Gyroscope::FIFORead(unsigned long long const&amp;, unsigned char) at src/drivers/imu/bosch/bmi088/BMI088_Gyroscope.cpp:447</span>
</span><span id="gdb_backtrace-64"><a href="#gdb_backtrace-64"><span class="linenos">64</span></a><span class="sd">    #14 0x08041102 in Bosch::BMI088::Gyroscope::BMI088_Gyroscope::RunImpl() at src/drivers/imu/bosch/bmi088/BMI088_Gyroscope.cpp:224</span>
</span><span id="gdb_backtrace-65"><a href="#gdb_backtrace-65"><span class="linenos">65</span></a><span class="sd">    #15 0x0803fb7a in I2CSPIDriver&lt;BMI088&gt;::Run() at platforms/common/include/px4_platform_common/i2c_spi_buses.h:343</span>
</span><span id="gdb_backtrace-66"><a href="#gdb_backtrace-66"><span class="linenos">66</span></a><span class="sd">    #16 0x0817164c in px4::WorkQueue::Run() at platforms/common/px4_work_queue/WorkQueue.cpp:187</span>
</span><span id="gdb_backtrace-67"><a href="#gdb_backtrace-67"><span class="linenos">67</span></a><span class="sd">    #17 0x08171798 in px4::WorkQueueRunner(void*) at platforms/common/px4_work_queue/WorkQueueManager.cpp:236</span>
</span><span id="gdb_backtrace-68"><a href="#gdb_backtrace-68"><span class="linenos">68</span></a><span class="sd">    #18 0x08014ccc in pthread_startup() at platforms/nuttx/NuttX/nuttx/libs/libc/pthread/pthread_create.c:59</span>
</span><span id="gdb_backtrace-69"><a href="#gdb_backtrace-69"><span class="linenos">69</span></a><span class="sd">    ```</span>
</span><span id="gdb_backtrace-70"><a href="#gdb_backtrace-70"><span class="linenos">70</span></a>
</span><span id="gdb_backtrace-71"><a href="#gdb_backtrace-71"><span class="linenos">71</span></a><span class="sd">    :return: the selected frame&#39;s backtrace without resolving function argument</span>
</span><span id="gdb_backtrace-72"><a href="#gdb_backtrace-72"><span class="linenos">72</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="gdb_backtrace-73"><a href="#gdb_backtrace-73"><span class="linenos">73</span></a>    <span class="n">frame</span> <span class="o">=</span> <span class="n">gdb</span><span class="o">.</span><span class="n">selected_frame</span><span class="p">()</span>
</span><span id="gdb_backtrace-74"><a href="#gdb_backtrace-74"><span class="linenos">74</span></a>    <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="gdb_backtrace-75"><a href="#gdb_backtrace-75"><span class="linenos">75</span></a>    <span class="n">output</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="gdb_backtrace-76"><a href="#gdb_backtrace-76"><span class="linenos">76</span></a>    <span class="k">while</span><span class="p">(</span><span class="n">frame</span> <span class="ow">and</span> <span class="n">frame</span><span class="o">.</span><span class="n">is_valid</span><span class="p">()):</span>
</span><span id="gdb_backtrace-77"><a href="#gdb_backtrace-77"><span class="linenos">77</span></a>        <span class="n">pc</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">pc</span><span class="p">()</span>
</span><span id="gdb_backtrace-78"><a href="#gdb_backtrace-78"><span class="linenos">78</span></a>        <span class="k">if</span> <span class="n">pc</span> <span class="o">&gt;</span> <span class="mh">0xffff_ff00</span><span class="p">:</span>
</span><span id="gdb_backtrace-79"><a href="#gdb_backtrace-79"><span class="linenos">79</span></a>            <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;#</span><span class="si">{</span><span class="n">index</span><span class="si">:</span><span class="s2"> &lt;2</span><span class="si">}</span><span class="s2"> &lt;signal handler called&gt;&quot;</span><span class="p">)</span>
</span><span id="gdb_backtrace-80"><a href="#gdb_backtrace-80"><span class="linenos">80</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="gdb_backtrace-81"><a href="#gdb_backtrace-81"><span class="linenos">81</span></a>            <span class="n">line</span> <span class="o">=</span> <span class="s2">&quot;??&quot;</span>
</span><span id="gdb_backtrace-82"><a href="#gdb_backtrace-82"><span class="linenos">82</span></a>            <span class="n">file</span> <span class="o">=</span> <span class="s2">&quot;??&quot;</span>
</span><span id="gdb_backtrace-83"><a href="#gdb_backtrace-83"><span class="linenos">83</span></a>            <span class="k">if</span> <span class="n">sal</span> <span class="o">:=</span> <span class="n">frame</span><span class="o">.</span><span class="n">find_sal</span><span class="p">():</span>
</span><span id="gdb_backtrace-84"><a href="#gdb_backtrace-84"><span class="linenos">84</span></a>                <span class="n">line</span> <span class="o">=</span> <span class="n">sal</span><span class="o">.</span><span class="n">line</span>
</span><span id="gdb_backtrace-85"><a href="#gdb_backtrace-85"><span class="linenos">85</span></a>                <span class="k">if</span> <span class="n">sal</span><span class="o">.</span><span class="n">symtab</span><span class="p">:</span>
</span><span id="gdb_backtrace-86"><a href="#gdb_backtrace-86"><span class="linenos">86</span></a>                    <span class="n">file</span> <span class="o">=</span> <span class="n">sal</span><span class="o">.</span><span class="n">symtab</span><span class="o">.</span><span class="n">fullname</span><span class="p">()</span>
</span><span id="gdb_backtrace-87"><a href="#gdb_backtrace-87"><span class="linenos">87</span></a>            <span class="k">if</span> <span class="n">func</span> <span class="o">:=</span> <span class="n">frame</span><span class="o">.</span><span class="n">function</span><span class="p">():</span>
</span><span id="gdb_backtrace-88"><a href="#gdb_backtrace-88"><span class="linenos">88</span></a>                <span class="n">func</span> <span class="o">=</span> <span class="n">func</span><span class="o">.</span><span class="n">print_name</span>
</span><span id="gdb_backtrace-89"><a href="#gdb_backtrace-89"><span class="linenos">89</span></a>                <span class="k">if</span> <span class="ow">not</span> <span class="n">func</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;)&quot;</span><span class="p">):</span> <span class="n">func</span> <span class="o">+=</span> <span class="s2">&quot;()&quot;</span>
</span><span id="gdb_backtrace-90"><a href="#gdb_backtrace-90"><span class="linenos">90</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="gdb_backtrace-91"><a href="#gdb_backtrace-91"><span class="linenos">91</span></a>                <span class="n">func</span> <span class="o">=</span> <span class="s2">&quot;??&quot;</span>
</span><span id="gdb_backtrace-92"><a href="#gdb_backtrace-92"><span class="linenos">92</span></a>            <span class="n">output</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;#</span><span class="si">{</span><span class="n">index</span><span class="si">:</span><span class="s2"> &lt;2</span><span class="si">}</span><span class="s2"> 0x</span><span class="si">{</span><span class="n">pc</span><span class="si">:</span><span class="s2">08x</span><span class="si">}</span><span class="s2"> in </span><span class="si">{</span><span class="n">func</span><span class="si">}</span><span class="s2"> at </span><span class="si">{</span><span class="n">file</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">line</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="gdb_backtrace-93"><a href="#gdb_backtrace-93"><span class="linenos">93</span></a>        <span class="n">frame</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">older</span><span class="p">()</span>
</span><span id="gdb_backtrace-94"><a href="#gdb_backtrace-94"><span class="linenos">94</span></a>        <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="gdb_backtrace-95"><a href="#gdb_backtrace-95"><span class="linenos">95</span></a>    <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Unfortunately the built-in gdb command <code>backtrace</code> often crashes when
trying to resolve function arguments whose memory is inaccessible due to
optimizations or whose type is too complex.
Therefore this is a simpler implementation in Python to avoid GDB crashing.</p>

<pre><code>(gdb) px4_backtrace
#0  0x0800b3be in sched_unlock() at platforms/nuttx/NuttX/nuttx/sched/sched/sched_unlock.c:272
#1  0x0800b59e in nxsem_post() at platforms/nuttx/NuttX/nuttx/sched/semaphore/sem_post.c:175
#2  0x0800b5b6 in sem_post() at platforms/nuttx/NuttX/nuttx/sched/semaphore/sem_post.c:220
#3  0x08171570 in px4::WorkQueue::SignalWorkerThread() at platforms/common/px4_work_queue/WorkQueue.cpp:151
#4  0x08171570 in px4::WorkQueue::Add(px4::WorkItem*) at platforms/common/px4_work_queue/WorkQueue.cpp:143
#5  0x0816f8dc in px4::WorkItem::ScheduleNow() at platforms/common/include/px4_platform_common/px4_work_queue/WorkItem.hpp:69
#6  0x0816f8dc in uORB::SubscriptionCallbackWorkItem::call() at platforms/common/uORB/SubscriptionCallback.hpp:169
#7  0x0816f8dc in uORB::DeviceNode::write(file*, char const*, unsigned int) at platforms/common/uORB/uORBDeviceNode.cpp:221
#8  0x0816faca in uORB::DeviceNode::publish(orb_metadata const*, void*, void const*) at platforms/common/uORB/uORBDeviceNode.cpp:295
#9  0x081700bc in uORB::Manager::orb_publish(orb_metadata const*, void*, void const*) at platforms/common/uORB/uORBManager.cpp:409
#10 0x0816e6d8 in orb_publish(orb_metadata const*, orb_advert_t, void const*) at platforms/common/uORB/uORBManager.hpp:193
#11 0x08160912 in uORB::PublicationMulti&lt;sensor_gyro_fifo_s, (unsigned char)4&gt;::publish(sensor_gyro_fifo_s const&amp;) at platforms/common/uORB/PublicationMulti.hpp:92
#12 0x08160912 in PX4Gyroscope::updateFIFO(sensor_gyro_fifo_s&amp;) at src/lib/drivers/gyroscope/PX4Gyroscope.cpp:149
#13 0x08040e74 in Bosch::BMI088::Gyroscope::BMI088_Gyroscope::FIFORead(unsigned long long const&amp;, unsigned char) at src/drivers/imu/bosch/bmi088/BMI088_Gyroscope.cpp:447
#14 0x08041102 in Bosch::BMI088::Gyroscope::BMI088_Gyroscope::RunImpl() at src/drivers/imu/bosch/bmi088/BMI088_Gyroscope.cpp:224
#15 0x0803fb7a in I2CSPIDriver&lt;BMI088&gt;::Run() at platforms/common/include/px4_platform_common/i2c_spi_buses.h:343
#16 0x0817164c in px4::WorkQueue::Run() at platforms/common/px4_work_queue/WorkQueue.cpp:187
#17 0x08171798 in px4::WorkQueueRunner(void*) at platforms/common/px4_work_queue/WorkQueueManager.cpp:236
#18 0x08014ccc in pthread_startup() at platforms/nuttx/NuttX/nuttx/libs/libc/pthread/pthread_create.c:59
</code></pre>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>the selected frame's backtrace without resolving function argument</p>
</blockquote>
</div>


                </section>
                <section id="gdb_relative_location">
                            <input id="gdb_relative_location-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">gdb_relative_location</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">gdb</span>, </span><span class="param"><span class="n">location</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="gdb_relative_location-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#gdb_relative_location"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="gdb_relative_location-97"><a href="#gdb_relative_location-97"><span class="linenos"> 97</span></a><span class="k">def</span> <span class="nf">gdb_relative_location</span><span class="p">(</span><span class="n">gdb</span><span class="p">,</span> <span class="n">location</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="gdb_relative_location-98"><a href="#gdb_relative_location-98"><span class="linenos"> 98</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="gdb_relative_location-99"><a href="#gdb_relative_location-99"><span class="linenos"> 99</span></a><span class="sd">    GDB can only place breakpoint on specific line number inside a file.</span>
</span><span id="gdb_relative_location-100"><a href="#gdb_relative_location-100"><span class="linenos">100</span></a><span class="sd">    However, if the file changes the line numbers can shift around, which makes</span>
</span><span id="gdb_relative_location-101"><a href="#gdb_relative_location-101"><span class="linenos">101</span></a><span class="sd">    this method brittle. Therefore this function finds the function inside</span>
</span><span id="gdb_relative_location-102"><a href="#gdb_relative_location-102"><span class="linenos">102</span></a><span class="sd">    the file and applies a offset or searches for a pattern inside that function</span>
</span><span id="gdb_relative_location-103"><a href="#gdb_relative_location-103"><span class="linenos">103</span></a><span class="sd">    to determine the correct line number.</span>
</span><span id="gdb_relative_location-104"><a href="#gdb_relative_location-104"><span class="linenos">104</span></a>
</span><span id="gdb_relative_location-105"><a href="#gdb_relative_location-105"><span class="linenos">105</span></a><span class="sd">    :param location:</span>
</span><span id="gdb_relative_location-106"><a href="#gdb_relative_location-106"><span class="linenos">106</span></a><span class="sd">        Location `function:+offset` or `function:regex`. In case the function</span>
</span><span id="gdb_relative_location-107"><a href="#gdb_relative_location-107"><span class="linenos">107</span></a><span class="sd">        uses static linkage you may also need to provide a unique part of the</span>
</span><span id="gdb_relative_location-108"><a href="#gdb_relative_location-108"><span class="linenos">108</span></a><span class="sd">        filename path to arbitrate multiple identically named static functions</span>
</span><span id="gdb_relative_location-109"><a href="#gdb_relative_location-109"><span class="linenos">109</span></a><span class="sd">        `file:function:+offset` or `file:function:regex`.</span>
</span><span id="gdb_relative_location-110"><a href="#gdb_relative_location-110"><span class="linenos">110</span></a>
</span><span id="gdb_relative_location-111"><a href="#gdb_relative_location-111"><span class="linenos">111</span></a><span class="sd">    :return: absolute location string `file:line_number`</span>
</span><span id="gdb_relative_location-112"><a href="#gdb_relative_location-112"><span class="linenos">112</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="gdb_relative_location-113"><a href="#gdb_relative_location-113"><span class="linenos">113</span></a>    <span class="n">parts</span> <span class="o">=</span> <span class="n">location</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
</span><span id="gdb_relative_location-114"><a href="#gdb_relative_location-114"><span class="linenos">114</span></a>    <span class="n">file_name</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="gdb_relative_location-115"><a href="#gdb_relative_location-115"><span class="linenos">115</span></a>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
</span><span id="gdb_relative_location-116"><a href="#gdb_relative_location-116"><span class="linenos">116</span></a>        <span class="n">file_name</span><span class="p">,</span> <span class="n">function_name</span><span class="p">,</span> <span class="n">line_pattern</span> <span class="o">=</span> <span class="n">parts</span>
</span><span id="gdb_relative_location-117"><a href="#gdb_relative_location-117"><span class="linenos">117</span></a>    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
</span><span id="gdb_relative_location-118"><a href="#gdb_relative_location-118"><span class="linenos">118</span></a>        <span class="n">function_name</span><span class="p">,</span> <span class="n">line_pattern</span> <span class="o">=</span> <span class="n">parts</span>
</span><span id="gdb_relative_location-119"><a href="#gdb_relative_location-119"><span class="linenos">119</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="gdb_relative_location-120"><a href="#gdb_relative_location-120"><span class="linenos">120</span></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown location format &#39;</span><span class="si">{</span><span class="n">location</span><span class="si">}</span><span class="s2">&#39;!&quot;</span><span class="p">)()</span>
</span><span id="gdb_relative_location-121"><a href="#gdb_relative_location-121"><span class="linenos">121</span></a>
</span><span id="gdb_relative_location-122"><a href="#gdb_relative_location-122"><span class="linenos">122</span></a>    <span class="n">function</span> <span class="o">=</span> <span class="n">gdb</span><span class="o">.</span><span class="n">lookup_global_symbol</span><span class="p">(</span><span class="n">function_name</span><span class="p">,</span> <span class="n">gdb</span><span class="o">.</span><span class="n">SYMBOL_VAR_DOMAIN</span><span class="p">)</span>
</span><span id="gdb_relative_location-123"><a href="#gdb_relative_location-123"><span class="linenos">123</span></a>    <span class="k">if</span> <span class="n">function</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="gdb_relative_location-124"><a href="#gdb_relative_location-124"><span class="linenos">124</span></a>        <span class="c1"># Multiple static symbols may exists, we use the filename to arbitrate</span>
</span><span id="gdb_relative_location-125"><a href="#gdb_relative_location-125"><span class="linenos">125</span></a>        <span class="k">if</span> <span class="n">functions</span> <span class="o">:=</span> <span class="n">gdb</span><span class="o">.</span><span class="n">lookup_static_symbols</span><span class="p">(</span><span class="n">function_name</span><span class="p">,</span> <span class="n">gdb</span><span class="o">.</span><span class="n">SYMBOL_VAR_DOMAIN</span><span class="p">):</span>
</span><span id="gdb_relative_location-126"><a href="#gdb_relative_location-126"><span class="linenos">126</span></a>            <span class="n">file_functions</span> <span class="o">=</span> <span class="p">[(</span><span class="n">f</span><span class="o">.</span><span class="n">symtab</span><span class="o">.</span><span class="n">fullname</span><span class="p">(),</span> <span class="n">f</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">functions</span><span class="p">]</span>
</span><span id="gdb_relative_location-127"><a href="#gdb_relative_location-127"><span class="linenos">127</span></a>            <span class="c1"># Arbitrate using file name hint</span>
</span><span id="gdb_relative_location-128"><a href="#gdb_relative_location-128"><span class="linenos">128</span></a>            <span class="k">if</span> <span class="n">file_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="gdb_relative_location-129"><a href="#gdb_relative_location-129"><span class="linenos">129</span></a>                <span class="n">file_functions</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">file_functions</span> <span class="k">if</span> <span class="n">file_name</span> <span class="ow">in</span> <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
</span><span id="gdb_relative_location-130"><a href="#gdb_relative_location-130"><span class="linenos">130</span></a>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">file_functions</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="gdb_relative_location-131"><a href="#gdb_relative_location-131"><span class="linenos">131</span></a>                <span class="n">function</span> <span class="o">=</span> <span class="n">file_functions</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
</span><span id="gdb_relative_location-132"><a href="#gdb_relative_location-132"><span class="linenos">132</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="gdb_relative_location-133"><a href="#gdb_relative_location-133"><span class="linenos">133</span></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Multiple functions found:</span><span class="se">\n</span><span class="s2"> - &quot;</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> - &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">functions</span><span class="p">))</span>
</span><span id="gdb_relative_location-134"><a href="#gdb_relative_location-134"><span class="linenos">134</span></a>    <span class="k">if</span> <span class="n">function</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="gdb_relative_location-135"><a href="#gdb_relative_location-135"><span class="linenos">135</span></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot find function name &#39;</span><span class="si">{</span><span class="n">function_name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</span><span id="gdb_relative_location-136"><a href="#gdb_relative_location-136"><span class="linenos">136</span></a>    <span class="k">assert</span> <span class="n">function</span><span class="o">.</span><span class="n">is_function</span>
</span><span id="gdb_relative_location-137"><a href="#gdb_relative_location-137"><span class="linenos">137</span></a>
</span><span id="gdb_relative_location-138"><a href="#gdb_relative_location-138"><span class="linenos">138</span></a>    <span class="c1"># Find source file and line numbers: how to use file_name?</span>
</span><span id="gdb_relative_location-139"><a href="#gdb_relative_location-139"><span class="linenos">139</span></a>    <span class="n">file</span> <span class="o">=</span> <span class="n">function</span><span class="o">.</span><span class="n">symtab</span><span class="o">.</span><span class="n">fullname</span><span class="p">()</span>
</span><span id="gdb_relative_location-140"><a href="#gdb_relative_location-140"><span class="linenos">140</span></a>    <span class="n">line_numbers</span> <span class="o">=</span> <span class="n">function</span><span class="o">.</span><span class="n">symtab</span><span class="o">.</span><span class="n">linetable</span><span class="p">()</span><span class="o">.</span><span class="n">source_lines</span><span class="p">()</span>
</span><span id="gdb_relative_location-141"><a href="#gdb_relative_location-141"><span class="linenos">141</span></a>    <span class="n">lmin</span><span class="p">,</span> <span class="n">lmax</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">line_numbers</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">line_numbers</span><span class="p">)</span>
</span><span id="gdb_relative_location-142"><a href="#gdb_relative_location-142"><span class="linenos">142</span></a>
</span><span id="gdb_relative_location-143"><a href="#gdb_relative_location-143"><span class="linenos">143</span></a>    <span class="k">if</span> <span class="n">line_pattern</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;+&quot;</span><span class="p">):</span>
</span><span id="gdb_relative_location-144"><a href="#gdb_relative_location-144"><span class="linenos">144</span></a>        <span class="c1"># line offset relative to function</span>
</span><span id="gdb_relative_location-145"><a href="#gdb_relative_location-145"><span class="linenos">145</span></a>        <span class="n">line</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">line_pattern</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span> <span class="o">+</span> <span class="n">function</span><span class="o">.</span><span class="n">line</span>
</span><span id="gdb_relative_location-146"><a href="#gdb_relative_location-146"><span class="linenos">146</span></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="gdb_relative_location-147"><a href="#gdb_relative_location-147"><span class="linenos">147</span></a>        <span class="c1"># regex line pattern, read source file and find the line</span>
</span><span id="gdb_relative_location-148"><a href="#gdb_relative_location-148"><span class="linenos">148</span></a>        <span class="n">lines</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">file</span><span class="p">)</span><span class="o">.</span><span class="n">read_text</span><span class="p">()</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>
</span><span id="gdb_relative_location-149"><a href="#gdb_relative_location-149"><span class="linenos">149</span></a>        <span class="n">lines</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">enumerate</span><span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="n">lmin</span><span class="p">:</span><span class="n">lmax</span><span class="p">]))</span>
</span><span id="gdb_relative_location-150"><a href="#gdb_relative_location-150"><span class="linenos">150</span></a>        <span class="k">for</span> <span class="n">ii</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
</span><span id="gdb_relative_location-151"><a href="#gdb_relative_location-151"><span class="linenos">151</span></a>            <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">line_pattern</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>
</span><span id="gdb_relative_location-152"><a href="#gdb_relative_location-152"><span class="linenos">152</span></a>                <span class="n">line</span> <span class="o">=</span> <span class="n">lmin</span> <span class="o">+</span> <span class="n">ii</span>
</span><span id="gdb_relative_location-153"><a href="#gdb_relative_location-153"><span class="linenos">153</span></a>                <span class="k">break</span>
</span><span id="gdb_relative_location-154"><a href="#gdb_relative_location-154"><span class="linenos">154</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="gdb_relative_location-155"><a href="#gdb_relative_location-155"><span class="linenos">155</span></a>            <span class="n">lines</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">  &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">lmin</span><span class="o">+</span><span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">:</span><span class="s2">&gt;4</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">l</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">)</span>
</span><span id="gdb_relative_location-156"><a href="#gdb_relative_location-156"><span class="linenos">156</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Cannot find source line for &#39;</span><span class="si">{</span><span class="n">line_pattern</span><span class="si">}</span><span class="s2">&#39;!</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span id="gdb_relative_location-157"><a href="#gdb_relative_location-157"><span class="linenos">157</span></a>                <span class="sa">f</span><span class="s2">&quot;Function &#39;</span><span class="si">{</span><span class="n">function_name</span><span class="si">}</span><span class="s2">&#39; stretches over lines </span><span class="si">{</span><span class="n">lmin</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">lmax</span><span class="si">}</span><span class="s2">.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="gdb_relative_location-158"><a href="#gdb_relative_location-158"><span class="linenos">158</span></a>                <span class="c1"># f&quot;Available source lines are:\n  {lines}&quot;)</span>
</span><span id="gdb_relative_location-159"><a href="#gdb_relative_location-159"><span class="linenos">159</span></a>
</span><span id="gdb_relative_location-160"><a href="#gdb_relative_location-160"><span class="linenos">160</span></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">file</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">line</span><span class="si">}</span><span class="s2">&quot;</span>
</span></pre></div>


            <div class="docstring"><p>GDB can only place breakpoint on specific line number inside a file.
However, if the file changes the line numbers can shift around, which makes
this method brittle. Therefore this function finds the function inside
the file and applies a offset or searches for a pattern inside that function
to determine the correct line number.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>location</strong>: 
Location <code>function:+offset</code> or <code>function:regex</code>. In case the function
uses static linkage you may also need to provide a unique part of the
filename path to arbitrate multiple identically named static functions
<code>file:function:+offset</code> or <code>file:function:regex</code>.</li>
</ul>

<h6 id="returns">Returns</h6>

<blockquote>
  <p>absolute location string <code>file:line_number</code></p>
</blockquote>
</div>


                </section>
                <section id="binary_search_last">
                            <input id="binary_search_last-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">binary_search_last</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">array</span>, </span><span class="param"><span class="n">value</span>, </span><span class="param"><span class="n">lo</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span>, </span><span class="param"><span class="n">hi</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="binary_search_last-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#binary_search_last"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="binary_search_last-175"><a href="#binary_search_last-175"><span class="linenos">175</span></a><span class="k">def</span> <span class="nf">binary_search_last</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">lo</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">hi</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="binary_search_last-176"><a href="#binary_search_last-176"><span class="linenos">176</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Binary search the last occurrance of value in an array&quot;&quot;&quot;</span>
</span><span id="binary_search_last-177"><a href="#binary_search_last-177"><span class="linenos">177</span></a>    <span class="k">if</span> <span class="n">lo</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="n">lo</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="binary_search_last-178"><a href="#binary_search_last-178"><span class="linenos">178</span></a>    <span class="k">if</span> <span class="n">hi</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="n">hi</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>
</span><span id="binary_search_last-179"><a href="#binary_search_last-179"><span class="linenos">179</span></a>    <span class="k">return</span> <span class="n">_binary_search</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">lo</span><span class="p">,</span> <span class="n">hi</span><span class="p">,</span> <span class="n">direction</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Binary search the last occurrance of value in an array</p>
</div>


                </section>
                <section id="binary_search_first">
                            <input id="binary_search_first-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">binary_search_first</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">array</span>, </span><span class="param"><span class="n">value</span>, </span><span class="param"><span class="n">lo</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span>, </span><span class="param"><span class="n">hi</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="binary_search_first-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#binary_search_first"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="binary_search_first-181"><a href="#binary_search_first-181"><span class="linenos">181</span></a><span class="k">def</span> <span class="nf">binary_search_first</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">lo</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">hi</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="binary_search_first-182"><a href="#binary_search_first-182"><span class="linenos">182</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Binary search the first occurrance of value in an array&quot;&quot;&quot;</span>
</span><span id="binary_search_first-183"><a href="#binary_search_first-183"><span class="linenos">183</span></a>    <span class="k">if</span> <span class="n">lo</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="n">lo</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="binary_search_first-184"><a href="#binary_search_first-184"><span class="linenos">184</span></a>    <span class="k">if</span> <span class="n">hi</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="n">hi</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">array</span><span class="p">)</span>
</span><span id="binary_search_first-185"><a href="#binary_search_first-185"><span class="linenos">185</span></a>    <span class="k">return</span> <span class="n">_binary_search</span><span class="p">(</span><span class="n">array</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">lo</span><span class="p">,</span> <span class="n">hi</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Binary search the first occurrance of value in an array</p>
</div>


                </section>
                <section id="chunks">
                            <input id="chunks-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">chunks</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">iterable</span>, </span><span class="param"><span class="n">chunk_size</span><span class="p">:</span> <span class="nb">int</span>, </span><span class="param"><span class="n">fill</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="chunks-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#chunks"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="chunks-189"><a href="#chunks-189"><span class="linenos">189</span></a><span class="k">def</span> <span class="nf">chunks</span><span class="p">(</span><span class="n">iterable</span><span class="p">,</span> <span class="n">chunk_size</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="chunks-190"><a href="#chunks-190"><span class="linenos">190</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert a iterable into a list of chunks and fill the rest with a value&quot;&quot;&quot;</span>
</span><span id="chunks-191"><a href="#chunks-191"><span class="linenos">191</span></a>    <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="nb">iter</span><span class="p">(</span><span class="n">iterable</span><span class="p">)]</span> <span class="o">*</span> <span class="n">chunk_size</span>
</span><span id="chunks-192"><a href="#chunks-192"><span class="linenos">192</span></a>    <span class="k">return</span> <span class="n">zip_longest</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">fillvalue</span><span class="o">=</span><span class="n">fill</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Convert a iterable into a list of chunks and fill the rest with a value</p>
</div>


                </section>
                <section id="add_datetime">
                            <input id="add_datetime-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">add_datetime</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">filename</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="add_datetime-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#add_datetime"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="add_datetime-195"><a href="#add_datetime-195"><span class="linenos">195</span></a><span class="k">def</span> <span class="nf">add_datetime</span><span class="p">(</span><span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="o">|</span><span class="n">Path</span><span class="p">):</span>
</span><span id="add_datetime-196"><a href="#add_datetime-196"><span class="linenos">196</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="add_datetime-197"><a href="#add_datetime-197"><span class="linenos">197</span></a><span class="sd">    Appends a filename with the current date and time:</span>
</span><span id="add_datetime-198"><a href="#add_datetime-198"><span class="linenos">198</span></a><span class="sd">    `Year_Month_Day_Hour_Minute_Second`</span>
</span><span id="add_datetime-199"><a href="#add_datetime-199"><span class="linenos">199</span></a>
</span><span id="add_datetime-200"><a href="#add_datetime-200"><span class="linenos">200</span></a><span class="sd">    Example: `path/name.txt` -&gt; `path/name_2023_04_14_15_03_24.txt`</span>
</span><span id="add_datetime-201"><a href="#add_datetime-201"><span class="linenos">201</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="add_datetime-202"><a href="#add_datetime-202"><span class="linenos">202</span></a>    <span class="n">filename</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</span><span id="add_datetime-203"><a href="#add_datetime-203"><span class="linenos">203</span></a>    <span class="k">return</span> <span class="n">filename</span><span class="o">.</span><span class="n">with_stem</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">filename</span><span class="o">.</span><span class="n">stem</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y_%m_</span><span class="si">%d</span><span class="s1">_%H_%M_%S&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Appends a filename with the current date and time:
<code>Year_Month_Day_Hour_Minute_Second</code></p>

<p>Example: <code>path/name.txt</code> -> <code>path/name_2023_04_14_15_03_24.txt</code></p>
</div>


                </section>
                <section id="format_units">
                            <input id="format_units-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">format_units</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">value</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">prefixes</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">unit</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">fmt</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>,</span><span class="param">	<span class="n">if_zero</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="format_units-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#format_units"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="format_units-206"><a href="#format_units-206"><span class="linenos">206</span></a><span class="k">def</span> <span class="nf">format_units</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">float</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">prefixes</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="format_units-207"><a href="#format_units-207"><span class="linenos">207</span></a>                 <span class="n">unit</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">fmt</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">if_zero</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="format_units-208"><a href="#format_units-208"><span class="linenos">208</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="format_units-209"><a href="#format_units-209"><span class="linenos">209</span></a><span class="sd">    Format a value with the largest prefix.</span>
</span><span id="format_units-210"><a href="#format_units-210"><span class="linenos">210</span></a>
</span><span id="format_units-211"><a href="#format_units-211"><span class="linenos">211</span></a><span class="sd">    The value is divided by the list of prefixes until it is smaller than the</span>
</span><span id="format_units-212"><a href="#format_units-212"><span class="linenos">212</span></a><span class="sd">    next largest prefix. Trailing zeros are replaced by spaces and padding is</span>
</span><span id="format_units-213"><a href="#format_units-213"><span class="linenos">213</span></a><span class="sd">    applied to align the prefixes and units. If the value is zero, the</span>
</span><span id="format_units-214"><a href="#format_units-214"><span class="linenos">214</span></a><span class="sd">    `if_zero` string is returned if defined.</span>
</span><span id="format_units-215"><a href="#format_units-215"><span class="linenos">215</span></a>
</span><span id="format_units-216"><a href="#format_units-216"><span class="linenos">216</span></a><span class="sd">    Predefined prefixes can be passed as a `group:input-prefix`:</span>
</span><span id="format_units-217"><a href="#format_units-217"><span class="linenos">217</span></a><span class="sd">    - `t`: time prefixes from nanoseconds to days.</span>
</span><span id="format_units-218"><a href="#format_units-218"><span class="linenos">218</span></a><span class="sd">    - `si`: SI prefixes from nano to Tera.</span>
</span><span id="format_units-219"><a href="#format_units-219"><span class="linenos">219</span></a>
</span><span id="format_units-220"><a href="#format_units-220"><span class="linenos">220</span></a><span class="sd">    .. note:: The micro prefix is µ, not u.</span>
</span><span id="format_units-221"><a href="#format_units-221"><span class="linenos">221</span></a>
</span><span id="format_units-222"><a href="#format_units-222"><span class="linenos">222</span></a><span class="sd">    Example:</span>
</span><span id="format_units-223"><a href="#format_units-223"><span class="linenos">223</span></a>
</span><span id="format_units-224"><a href="#format_units-224"><span class="linenos">224</span></a><span class="sd">    ```py</span>
</span><span id="format_units-225"><a href="#format_units-225"><span class="linenos">225</span></a><span class="sd">    format_units(123456, &quot;t:µs&quot;, fmt=&quot;.1f&quot;)    # &quot;123.5ms&quot;</span>
</span><span id="format_units-226"><a href="#format_units-226"><span class="linenos">226</span></a><span class="sd">    format_units(0, &quot;t:s&quot;, if_zero=&quot;-&quot;)        # &quot;-&quot;</span>
</span><span id="format_units-227"><a href="#format_units-227"><span class="linenos">227</span></a><span class="sd">    format_units(1234, &quot;si:&quot;, &quot;Hz&quot;, fmt=&quot;.2f&quot;) # &quot;1.23kHz&quot;</span>
</span><span id="format_units-228"><a href="#format_units-228"><span class="linenos">228</span></a><span class="sd">    format_units(1001, &quot;si:&quot;, &quot;Hz&quot;, fmt=&quot;.2f&quot;) # &quot;1   kHz&quot;</span>
</span><span id="format_units-229"><a href="#format_units-229"><span class="linenos">229</span></a><span class="sd">    format_units(2345, {&quot;k&quot;: 1e3, &quot;M&quot;: 1e3}, &quot;Si&quot;, fmt=&quot;.1f&quot;) # &quot;2.3MSi&quot;</span>
</span><span id="format_units-230"><a href="#format_units-230"><span class="linenos">230</span></a><span class="sd">    ```</span>
</span><span id="format_units-231"><a href="#format_units-231"><span class="linenos">231</span></a>
</span><span id="format_units-232"><a href="#format_units-232"><span class="linenos">232</span></a><span class="sd">    :param value: An integer or floating point value. If None, an empty string is returned.</span>
</span><span id="format_units-233"><a href="#format_units-233"><span class="linenos">233</span></a><span class="sd">    :param prefixes:</span>
</span><span id="format_units-234"><a href="#format_units-234"><span class="linenos">234</span></a><span class="sd">        A dictionary of prefix string to ratio of the next largest prefix. The</span>
</span><span id="format_units-235"><a href="#format_units-235"><span class="linenos">235</span></a><span class="sd">        dictionary must be sorted from smallest to largest prefix. The prefix of</span>
</span><span id="format_units-236"><a href="#format_units-236"><span class="linenos">236</span></a><span class="sd">        the input value must be the first entry.</span>
</span><span id="format_units-237"><a href="#format_units-237"><span class="linenos">237</span></a><span class="sd">    :param unit: A unit string to be appended to the formatted value.</span>
</span><span id="format_units-238"><a href="#format_units-238"><span class="linenos">238</span></a><span class="sd">    :param fmt: A format specifier to be applied when formatting the value.</span>
</span><span id="format_units-239"><a href="#format_units-239"><span class="linenos">239</span></a><span class="sd">    :param if_zero: A string to be returned when the value is zero.</span>
</span><span id="format_units-240"><a href="#format_units-240"><span class="linenos">240</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="format_units-241"><a href="#format_units-241"><span class="linenos">241</span></a>    <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> <span class="k">return</span> <span class="s2">&quot;&quot;</span>
</span><span id="format_units-242"><a href="#format_units-242"><span class="linenos">242</span></a>    <span class="k">if</span> <span class="n">if_zero</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">value</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span> <span class="k">return</span> <span class="n">if_zero</span>
</span><span id="format_units-243"><a href="#format_units-243"><span class="linenos">243</span></a>
</span><span id="format_units-244"><a href="#format_units-244"><span class="linenos">244</span></a>    <span class="c1"># Find the correct prefix from a list of predefined common prefixes</span>
</span><span id="format_units-245"><a href="#format_units-245"><span class="linenos">245</span></a>    <span class="n">_found</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="format_units-246"><a href="#format_units-246"><span class="linenos">246</span></a>    <span class="k">if</span> <span class="n">prefixes</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;t:&quot;</span><span class="p">):</span>
</span><span id="format_units-247"><a href="#format_units-247"><span class="linenos">247</span></a>        <span class="n">time_units</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;ns&quot;</span><span class="p">:</span> <span class="mf">1e3</span><span class="p">,</span> <span class="s2">&quot;µs&quot;</span><span class="p">:</span> <span class="mf">1e3</span><span class="p">,</span> <span class="s2">&quot;ms&quot;</span><span class="p">:</span> <span class="mf">1e3</span><span class="p">,</span> <span class="s2">&quot;s&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span> <span class="s2">&quot;m&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span> <span class="s2">&quot;h&quot;</span><span class="p">:</span> <span class="mi">24</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">:</span> <span class="mf">365.25</span><span class="o">/</span><span class="mi">12</span><span class="p">}</span>
</span><span id="format_units-248"><a href="#format_units-248"><span class="linenos">248</span></a>        <span class="n">prefixes</span> <span class="o">=</span> <span class="n">prefixes</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="format_units-249"><a href="#format_units-249"><span class="linenos">249</span></a>        <span class="n">prefixes</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span><span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">time_units</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">_found</span> <span class="ow">or</span> <span class="p">(</span><span class="n">_found</span> <span class="o">:=</span> <span class="p">(</span><span class="n">k</span> <span class="o">==</span> <span class="n">prefixes</span><span class="p">))}</span>
</span><span id="format_units-250"><a href="#format_units-250"><span class="linenos">250</span></a>    <span class="k">elif</span> <span class="n">prefixes</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;si:&quot;</span><span class="p">):</span>
</span><span id="format_units-251"><a href="#format_units-251"><span class="linenos">251</span></a>        <span class="n">prefixes</span> <span class="o">=</span> <span class="n">prefixes</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="format_units-252"><a href="#format_units-252"><span class="linenos">252</span></a>        <span class="n">prefixes</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span><span class="mf">1e3</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;n&quot;</span><span class="p">,</span> <span class="s2">&quot;µ&quot;</span><span class="p">,</span> <span class="s2">&quot;m&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;k&quot;</span><span class="p">,</span> <span class="s2">&quot;M&quot;</span><span class="p">,</span> <span class="s2">&quot;G&quot;</span><span class="p">,</span> <span class="s2">&quot;T&quot;</span><span class="p">]</span>
</span><span id="format_units-253"><a href="#format_units-253"><span class="linenos">253</span></a>                    <span class="k">if</span> <span class="n">_found</span> <span class="ow">or</span> <span class="p">(</span><span class="n">_found</span> <span class="o">:=</span> <span class="p">(</span><span class="n">k</span> <span class="o">==</span> <span class="n">prefixes</span><span class="p">))}</span>
</span><span id="format_units-254"><a href="#format_units-254"><span class="linenos">254</span></a>
</span><span id="format_units-255"><a href="#format_units-255"><span class="linenos">255</span></a>    <span class="c1"># Divide the value until it is smaller than the next largest prefix</span>
</span><span id="format_units-256"><a href="#format_units-256"><span class="linenos">256</span></a>    <span class="k">for</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">factor</span> <span class="ow">in</span> <span class="n">prefixes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="format_units-257"><a href="#format_units-257"><span class="linenos">257</span></a>        <span class="k">if</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="n">factor</span><span class="p">:</span> <span class="k">break</span>
</span><span id="format_units-258"><a href="#format_units-258"><span class="linenos">258</span></a>        <span class="n">value</span> <span class="o">/=</span> <span class="n">factor</span>
</span><span id="format_units-259"><a href="#format_units-259"><span class="linenos">259</span></a>
</span><span id="format_units-260"><a href="#format_units-260"><span class="linenos">260</span></a>    <span class="c1"># Format the value</span>
</span><span id="format_units-261"><a href="#format_units-261"><span class="linenos">261</span></a>    <span class="n">value</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">value</span><span class="si">:{</span><span class="n">fmt</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}}</span><span class="s2">&quot;</span>
</span><span id="format_units-262"><a href="#format_units-262"><span class="linenos">262</span></a>    <span class="n">value_stripped</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
</span><span id="format_units-263"><a href="#format_units-263"><span class="linenos">263</span></a>    <span class="k">if</span> <span class="n">if_zero</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">value_stripped</span> <span class="o">==</span> <span class="s2">&quot;0&quot;</span><span class="p">:</span> <span class="k">return</span> <span class="n">if_zero</span>
</span><span id="format_units-264"><a href="#format_units-264"><span class="linenos">264</span></a>    <span class="c1"># pad the value to the right to align it</span>
</span><span id="format_units-265"><a href="#format_units-265"><span class="linenos">265</span></a>    <span class="n">padding</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">prefixes</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span>
</span><span id="format_units-266"><a href="#format_units-266"><span class="linenos">266</span></a>    <span class="n">padding</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">value_stripped</span><span class="p">)</span>
</span><span id="format_units-267"><a href="#format_units-267"><span class="linenos">267</span></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">value_stripped</span><span class="si">}{</span><span class="n">padding</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="si">}{</span><span class="n">prefix</span><span class="si">}{</span><span class="n">unit</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="s2">&quot;</span>
</span></pre></div>


            <div class="docstring"><p>Format a value with the largest prefix.</p>

<p>The value is divided by the list of prefixes until it is smaller than the
next largest prefix. Trailing zeros are replaced by spaces and padding is
applied to align the prefixes and units. If the value is zero, the
<code>if_zero</code> string is returned if defined.</p>

<p>Predefined prefixes can be passed as a <code>group:input-prefix</code>:</p>

<ul>
<li><code>t</code>: time prefixes from nanoseconds to days.</li>
<li><code>si</code>: SI prefixes from nano to Tera.</li>
</ul>

<div class="alert note">

<h6 id="the-micro-prefix-is-μ-not-u">The micro prefix is µ, not u.</h6>

</div>

<p>Example:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="n">format_units</span><span class="p">(</span><span class="mi">123456</span><span class="p">,</span> <span class="s2">&quot;t:µs&quot;</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;.1f&quot;</span><span class="p">)</span>    <span class="c1"># &quot;123.5ms&quot;</span>
<span class="n">format_units</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;t:s&quot;</span><span class="p">,</span> <span class="n">if_zero</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">)</span>        <span class="c1"># &quot;-&quot;</span>
<span class="n">format_units</span><span class="p">(</span><span class="mi">1234</span><span class="p">,</span> <span class="s2">&quot;si:&quot;</span><span class="p">,</span> <span class="s2">&quot;Hz&quot;</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;.2f&quot;</span><span class="p">)</span> <span class="c1"># &quot;1.23kHz&quot;</span>
<span class="n">format_units</span><span class="p">(</span><span class="mi">1001</span><span class="p">,</span> <span class="s2">&quot;si:&quot;</span><span class="p">,</span> <span class="s2">&quot;Hz&quot;</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;.2f&quot;</span><span class="p">)</span> <span class="c1"># &quot;1   kHz&quot;</span>
<span class="n">format_units</span><span class="p">(</span><span class="mi">2345</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;k&quot;</span><span class="p">:</span> <span class="mf">1e3</span><span class="p">,</span> <span class="s2">&quot;M&quot;</span><span class="p">:</span> <span class="mf">1e3</span><span class="p">},</span> <span class="s2">&quot;Si&quot;</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;.1f&quot;</span><span class="p">)</span> <span class="c1"># &quot;2.3MSi&quot;</span>
</code></pre>
</div>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>value</strong>:  An integer or floating point value. If None, an empty string is returned.</li>
<li><strong>prefixes</strong>: 
A dictionary of prefix string to ratio of the next largest prefix. The
dictionary must be sorted from smallest to largest prefix. The prefix of
the input value must be the first entry.</li>
<li><strong>unit</strong>:  A unit string to be appended to the formatted value.</li>
<li><strong>fmt</strong>:  A format specifier to be applied when formatting the value.</li>
<li><strong>if_zero</strong>:  A string to be returned when the value is zero.</li>
</ul>
</div>


                </section>
                <section id="format_table">
                            <input id="format_table-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">format_table</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">fmtstr</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">header</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>,</span><span class="param">	<span class="n">rows</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>,</span><span class="param">	<span class="n">columns</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span></span><span class="return-annotation">) -> <span class="nb">str</span>:</span></span>

                <label class="view-source-button" for="format_table-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#format_table"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="format_table-271"><a href="#format_table-271"><span class="linenos">271</span></a><span class="k">def</span> <span class="nf">format_table</span><span class="p">(</span><span class="n">fmtstr</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">header</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">rows</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span> <span class="n">columns</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="format_table-272"><a href="#format_table-272"><span class="linenos">272</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="format_table-273"><a href="#format_table-273"><span class="linenos">273</span></a><span class="sd">    DEPRECATED: Use `rich.table.Table` instead!</span>
</span><span id="format_table-274"><a href="#format_table-274"><span class="linenos">274</span></a>
</span><span id="format_table-275"><a href="#format_table-275"><span class="linenos">275</span></a><span class="sd">    Formats a list of rows into a table of multiple meta-columns based on the format string.</span>
</span><span id="format_table-276"><a href="#format_table-276"><span class="linenos">276</span></a><span class="sd">    Example for formatting an array of registers into a table with three meta-columns:</span>
</span><span id="format_table-277"><a href="#format_table-277"><span class="linenos">277</span></a>
</span><span id="format_table-278"><a href="#format_table-278"><span class="linenos">278</span></a><span class="sd">    ```py</span>
</span><span id="format_table-279"><a href="#format_table-279"><span class="linenos">279</span></a><span class="sd">    fmtstr = &quot;{:%d}  {:&gt;%d}  {:&gt;%d}&quot;</span>
</span><span id="format_table-280"><a href="#format_table-280"><span class="linenos">280</span></a><span class="sd">    header = [&quot;NAME&quot;, &quot;HEX VALUE&quot;, &quot;INT VALUE&quot;]</span>
</span><span id="format_table-281"><a href="#format_table-281"><span class="linenos">281</span></a><span class="sd">    rows = [[reg, hex(value), value] for reg, value in registers.items()]</span>
</span><span id="format_table-282"><a href="#format_table-282"><span class="linenos">282</span></a><span class="sd">    table = utils.format_table(fmtstr, header, rows, 3)</span>
</span><span id="format_table-283"><a href="#format_table-283"><span class="linenos">283</span></a><span class="sd">    ```</span>
</span><span id="format_table-284"><a href="#format_table-284"><span class="linenos">284</span></a>
</span><span id="format_table-285"><a href="#format_table-285"><span class="linenos">285</span></a><span class="sd">    :param fmtstr: A string describing the spacing between columns and their</span>
</span><span id="format_table-286"><a href="#format_table-286"><span class="linenos">286</span></a><span class="sd">                   alignment. Must have exactly as many entries as the header a</span>
</span><span id="format_table-287"><a href="#format_table-287"><span class="linenos">287</span></a><span class="sd">                   rows. Example: two columns, aligned right and left with a</span>
</span><span id="format_table-288"><a href="#format_table-288"><span class="linenos">288</span></a><span class="sd">                   brace formatter: `&quot;{:&gt;%d} ({:%d})&quot;` The `%d` is replaced by</span>
</span><span id="format_table-289"><a href="#format_table-289"><span class="linenos">289</span></a><span class="sd">                   the max column width by this function.</span>
</span><span id="format_table-290"><a href="#format_table-290"><span class="linenos">290</span></a><span class="sd">    :param header: A list of names for the header row. If you specify more than</span>
</span><span id="format_table-291"><a href="#format_table-291"><span class="linenos">291</span></a><span class="sd">                   one column, the header will be duplicated.</span>
</span><span id="format_table-292"><a href="#format_table-292"><span class="linenos">292</span></a><span class="sd">    :param rows: a list of lists of entries in the table. Each entry will be</span>
</span><span id="format_table-293"><a href="#format_table-293"><span class="linenos">293</span></a><span class="sd">                 converted to `str` to count the maximal length of each column.</span>
</span><span id="format_table-294"><a href="#format_table-294"><span class="linenos">294</span></a><span class="sd">    :param columns: If a table is very long, the header can be duplicated to the</span>
</span><span id="format_table-295"><a href="#format_table-295"><span class="linenos">295</span></a><span class="sd">                    right side of the table to fill more screen space.</span>
</span><span id="format_table-296"><a href="#format_table-296"><span class="linenos">296</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="format_table-297"><a href="#format_table-297"><span class="linenos">297</span></a>    <span class="c1"># duplicate and join the format string for each column</span>
</span><span id="format_table-298"><a href="#format_table-298"><span class="linenos">298</span></a>    <span class="n">split_horizontal</span> <span class="o">=</span> <span class="n">columns</span> <span class="o">&gt;</span> <span class="mi">0</span>
</span><span id="format_table-299"><a href="#format_table-299"><span class="linenos">299</span></a>    <span class="n">columns</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span>
</span><span id="format_table-300"><a href="#format_table-300"><span class="linenos">300</span></a>    <span class="n">fmtstr</span> <span class="o">=</span> <span class="s2">&quot;      :      &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">fmtstr</span><span class="p">]</span> <span class="o">*</span> <span class="n">columns</span><span class="p">)</span>
</span><span id="format_table-301"><a href="#format_table-301"><span class="linenos">301</span></a>    <span class="n">fmtcnt</span> <span class="o">=</span> <span class="n">fmtstr</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="format_table-302"><a href="#format_table-302"><span class="linenos">302</span></a>    <span class="n">column_width</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">fmtcnt</span>
</span><span id="format_table-303"><a href="#format_table-303"><span class="linenos">303</span></a>
</span><span id="format_table-304"><a href="#format_table-304"><span class="linenos">304</span></a>    <span class="c1"># Interleave the rows for the later chunking</span>
</span><span id="format_table-305"><a href="#format_table-305"><span class="linenos">305</span></a>    <span class="n">fill</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">fmtcnt</span> <span class="o">//</span> <span class="n">columns</span><span class="p">)</span>
</span><span id="format_table-306"><a href="#format_table-306"><span class="linenos">306</span></a>    <span class="k">if</span> <span class="n">split_horizontal</span><span class="p">:</span>
</span><span id="format_table-307"><a href="#format_table-307"><span class="linenos">307</span></a>        <span class="n">rows</span> <span class="o">=</span> <span class="p">[</span><span class="n">val</span> <span class="k">for</span> <span class="n">tup</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">chunks</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">math</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span> <span class="o">/</span> <span class="n">columns</span><span class="p">),</span> <span class="n">fill</span><span class="p">))</span> <span class="k">for</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">tup</span><span class="p">]</span>
</span><span id="format_table-308"><a href="#format_table-308"><span class="linenos">308</span></a>    <span class="c1"># prepend the duplicated header before the rows</span>
</span><span id="format_table-309"><a href="#format_table-309"><span class="linenos">309</span></a>    <span class="k">if</span> <span class="n">header</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="format_table-310"><a href="#format_table-310"><span class="linenos">310</span></a>        <span class="n">rows</span> <span class="o">=</span> <span class="p">[</span><span class="n">header</span><span class="p">]</span> <span class="o">*</span> <span class="n">columns</span> <span class="o">+</span> <span class="n">rows</span>
</span><span id="format_table-311"><a href="#format_table-311"><span class="linenos">311</span></a>    <span class="c1"># Group the individual rows into multiple columns per row</span>
</span><span id="format_table-312"><a href="#format_table-312"><span class="linenos">312</span></a>    <span class="n">rows</span> <span class="o">=</span> <span class="p">[</span><span class="nb">sum</span><span class="p">(</span><span class="n">rs</span><span class="p">,</span> <span class="p">[])</span> <span class="k">for</span> <span class="n">rs</span> <span class="ow">in</span> <span class="n">chunks</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">columns</span><span class="p">,</span> <span class="n">fill</span><span class="p">)]</span>
</span><span id="format_table-313"><a href="#format_table-313"><span class="linenos">313</span></a>
</span><span id="format_table-314"><a href="#format_table-314"><span class="linenos">314</span></a>    <span class="c1"># collect each line and compute the column width</span>
</span><span id="format_table-315"><a href="#format_table-315"><span class="linenos">315</span></a>    <span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="format_table-316"><a href="#format_table-316"><span class="linenos">316</span></a>    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
</span><span id="format_table-317"><a href="#format_table-317"><span class="linenos">317</span></a>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">row</span><span class="p">)</span> <span class="o">!=</span> <span class="n">fmtcnt</span><span class="p">:</span>
</span><span id="format_table-318"><a href="#format_table-318"><span class="linenos">318</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Each row have the same number of entries as the format string&quot;</span><span class="p">)</span>
</span><span id="format_table-319"><a href="#format_table-319"><span class="linenos">319</span></a>        <span class="n">line</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">l</span><span class="p">)</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">row</span><span class="p">]</span>
</span><span id="format_table-320"><a href="#format_table-320"><span class="linenos">320</span></a>        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span id="format_table-321"><a href="#format_table-321"><span class="linenos">321</span></a>        <span class="n">column_width</span> <span class="o">=</span> <span class="p">[</span><span class="nb">max</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">l</span><span class="p">))</span> <span class="k">for</span> <span class="n">w</span><span class="p">,</span> <span class="n">l</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">column_width</span><span class="p">,</span> <span class="n">line</span><span class="p">)]</span>
</span><span id="format_table-322"><a href="#format_table-322"><span class="linenos">322</span></a>
</span><span id="format_table-323"><a href="#format_table-323"><span class="linenos">323</span></a>    <span class="c1"># Format the format string with the column width first</span>
</span><span id="format_table-324"><a href="#format_table-324"><span class="linenos">324</span></a>    <span class="n">fmtstr</span> <span class="o">=</span> <span class="n">fmtstr</span> <span class="o">%</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">column_width</span><span class="p">)</span>
</span><span id="format_table-325"><a href="#format_table-325"><span class="linenos">325</span></a>    <span class="c1"># Now format the actual lines with the formatted format string</span>
</span><span id="format_table-326"><a href="#format_table-326"><span class="linenos">326</span></a>    <span class="k">return</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">fmtstr</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">*</span><span class="n">line</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span></pre></div>


            <div class="docstring"><p>DEPRECATED: Use <code>rich.table.Table</code> instead!</p>

<p>Formats a list of rows into a table of multiple meta-columns based on the format string.
Example for formatting an array of registers into a table with three meta-columns:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="n">fmtstr</span> <span class="o">=</span> <span class="s2">&quot;{:</span><span class="si">%d</span><span class="s2">}  {:&gt;</span><span class="si">%d</span><span class="s2">}  {:&gt;</span><span class="si">%d</span><span class="s2">}&quot;</span>
<span class="n">header</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;NAME&quot;</span><span class="p">,</span> <span class="s2">&quot;HEX VALUE&quot;</span><span class="p">,</span> <span class="s2">&quot;INT VALUE&quot;</span><span class="p">]</span>
<span class="n">rows</span> <span class="o">=</span> <span class="p">[[</span><span class="n">reg</span><span class="p">,</span> <span class="nb">hex</span><span class="p">(</span><span class="n">value</span><span class="p">),</span> <span class="n">value</span><span class="p">]</span> <span class="k">for</span> <span class="n">reg</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">registers</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>
<span class="n">table</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">format_table</span><span class="p">(</span><span class="n">fmtstr</span><span class="p">,</span> <span class="n">header</span><span class="p">,</span> <span class="n">rows</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</code></pre>
</div>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>fmtstr</strong>:  A string describing the spacing between columns and their
alignment. Must have exactly as many entries as the header a
rows. Example: two columns, aligned right and left with a
brace formatter: <code>"{:&gt;%d} ({:%d})"</code> The <code>%d</code> is replaced by
the max column width by this function.</li>
<li><strong>header</strong>:  A list of names for the header row. If you specify more than
one column, the header will be duplicated.</li>
<li><strong>rows</strong>:  a list of lists of entries in the table. Each entry will be
converted to <code>str</code> to count the maximal length of each column.</li>
<li><strong>columns</strong>:  If a table is very long, the header can be duplicated to the
right side of the table to fill more screen space.</li>
</ul>
</div>


                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../../../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../../../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>